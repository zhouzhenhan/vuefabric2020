!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-fabric-canvas"]=e():t["vue-fabric-canvas"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=34)}([function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(27)("wks"),i=n(28),s=n(3).Symbol,a="function"==typeof s;(t.exports=function(t){return o[t]||(o[t]=a&&s[t]||(a?s:i)("Symbol."+t))}).store=o},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var o=n(7),i=n(45),s=n(46),a=Object.defineProperty;e.f=n(2)?Object.defineProperty:function(t,e,n){if(o(t),e=s(e,!0),o(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var o=n(3),i=n(0),s=n(20),a=n(6),r=n(8),c=function(t,e,n){var l,u,h,f=t&c.F,d=t&c.G,v=t&c.S,p=t&c.P,m=t&c.B,g=t&c.W,b=d?i:i[e]||(i[e]={}),y=b.prototype,x=d?o:v?o[e]:(o[e]||{}).prototype;d&&(n=e);for(l in n)(u=!f&&x&&void 0!==x[l])&&r(b,l)||(h=u?x[l]:n[l],b[l]=d&&"function"!=typeof x[l]?n[l]:m&&u?s(h,o):g&&x[l]==h?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):p&&"function"==typeof h?s(Function.call,h):h,p&&((b.virtual||(b.virtual={}))[l]=h,t&c.R&&y&&!y[l]&&a(y,l,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var o=n(4),i=n(14);t.exports=n(2)?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var o=n(12);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t,e,n,o,i,s){var a,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(a=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i);var u;if(s?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=u):o&&(u=o),u){var h=l.functional,f=h?l.render:l.beforeCreate;h?(l._injectStyles=u,l.render=function(t,e){return u.call(e),f(t,e)}):l.beforeCreate=f?[].concat(f,u):[u]}return{esModule:a,exports:r,options:l}}},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){var o=n(27)("keys"),i=n(28);t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,n){var o=n(11);t.exports=function(t){return Object(o(t))}},function(t,e,n){"use strict";var o=n(38),i=n.n(o),s=n(63),a=n.n(s),r=n(31),c=n.n(r),l=n(69),u=n.n(l),h=n(71),f=(n(72),n(78)),d=n(79);e.a={name:"FabricCanvas",components:{vueContextMenu:d.a},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},boxWidth:{type:Number,required:!0},boxHeight:{type:Number,required:!0},stepLengthp:{type:Number,default:50},showRuler:{type:Array,default:function(){return[!0,!0]}},idno:{type:Number,default:1,required:!0}},data:function(){return{name:"canvas",canvas:null,canvasZoom:1,clipboard:"",cid:1,xScale:[],yScale:[],xLeft:-200,yTop:-100,translateX:-18,translateY:-18,stepLength:this.stepLengthp,showXzhou:this.showRuler[0],showYzhou:this.showRuler[1],rulertop:0,rulerleft:0,scrollyH:100,scrollxW:50,contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"",icoName:"fa fa-home fa-fw",btnName:this.$t("m.layer"),children:[{fnHandler:"toLastLayer",icoName:"fa fa-home fa-fw",btnName:this.$t("m.MoveUpALayer")},{fnHandler:"toNextLayer",icoName:"fa fa-home fa-fw",btnName:this.$t("m.DownALayer")},{fnHandler:"toTopLayer",icoName:"fa fa-home fa-fw",btnName:this.$t("m.OnTheTopFloor")},{fnHandler:"toBottomLayer",icoName:"fa fa-home fa-fw",btnName:this.$t("m.AtTheBottom")}]},{fnHandler:"copypaste",icoName:"fa fa-home fa-fw",btnName:this.$t("m.copy")},{fnHandler:"removeEditObj",icoName:"fa fa-home fa-fw",btnName:this.$t("m.delete")}]}}},directives:{drag:{inserted:function(t,e,n){n=n.elm,t.dragstart=function(t){console.log("drag 0"),t.preventDefault(),document.onmousemove=document.onmouseup=null},t.ondrag=function(t){return console.log("drag 1"),t.preventDefault(),document.onmousemove=document.onmouseup=null,!1},t.onmousedown=function(t){var e=t.target.offsetHeight,o=t.target.offsetWidth,i=!0;if("scrollx"!==t.target.id&&"scrolly"!==t.target.id)return void(i=!1);console.log(o,e);var s=t.clientX-n.offsetLeft,a=t.clientY-n.offsetTop,r=null;"scrollx"===t.target.id?r="x":"scrolly"===t.target.id&&(r="y"),document.onmousemove=function(t){var c=void 0,l=void 0;if(c=t.clientX-s,l=t.clientY-a,"x"===r){if(t.clientY<a-60||t.clientY>a+60)return void(i=!1);if(i){var u=n.parentNode.offsetWidth-8-o;c<=18?c=18:c>=u&&(c=u),n.style.left=c+"px";var h=document.getElementById("canvas").offsetWidth-document.getElementById("content").offsetWidth+30,f=h*((c-18)/(u-18));document.getElementById("content").scrollLeft=document.getElementById("xZhou").scrollLeft=f}}else{if(t.clientX<s-60||t.clientX>s+60)return void(i=!1);if(i){var d=n.parentNode.offsetHeight-8-e;l<=18?l=18:l>=d&&(l=d),n.style.top=l+"px";var v=document.getElementById("canvas").offsetHeight-document.getElementById("content").offsetHeight+30,p=v*((l-18)/(d-18));document.getElementById("content").scrollTop=document.getElementById("yZhou").scrollTop=p}}},document.onmouseup=function(t){i=!1,document.onmousemove=document.onmouseup=null}}}}},watch:{idno:function(t,e){console.log("val",t,"old,",e),this.cid=t}},mounted:function(){var t=this;window.onresize=function(){t.rulertop=window.pageYOffset,t.rulerleft=window.pageYOffset,t.scrollxW=100,t.scrollyH=100};var e=this;Object(h.a)(document.getElementById("content").firstChild.childNodes[4],"mousewheel",this.show),Object(h.a)(document.getElementById("content").firstChild.childNodes[4],"scroll",this.show),Object(h.a)(document.getElementById("yZhou"),"mousewheel",this.yshow),Object(h.a)(document.getElementById("yZhou"),"scroll",this.yshow),Object(h.a)(document.getElementById("xZhou"),"mousewheel",this.yshow),Object(h.a)(document.getElementById("xZhou"),"scroll",this.yshow);document.onkeydown=function(t){console.log("keyCode:",window.event.keyCode);var n=window.event.keyCode;if(event.shiftKey&&107===window.event.keyCode?e.ChangeZoom(1):event.shiftKey&&109===window.event.keyCode&&e.ChangeZoom(0),46===n){e.removeCurrentObj()}if(37===n&&(e.getEditObj().left=parseInt(e.getEditObj().left-1),e.getEditObj().setCoords(),e.canvas.requestRenderAll(),e.canvas.renderAll()),38===n&&(e.getEditObj().top=parseInt(e.getEditObj().top-1),e.getEditObj().setCoords(),e.canvas.requestRenderAll(),e.canvas.renderAll()),39===n&&(e.getEditObj().left=parseInt(e.getEditObj().left+1),e.getEditObj().setCoords(),e.canvas.requestRenderAll(),e.canvas.renderAll()),40===n&&(e.getEditObj().top=parseInt(e.getEditObj().top+1),e.getEditObj().setCoords(),e.canvas.requestRenderAll(),e.canvas.renderAll()),event.ctrlKey&&67===n){var o=e.copyData();document.getElementById("code").value=o,e.clipboard=o,document.getElementById("code").select(),document.execCommand("copy"),document.getElementById("code").value=""}event.ctrlKey,event.shiftKey&&68===n&&e.copypaste()},document.onkeyup=function(t){},document.addEventListener("paste",function(t){var n=t.clipboardData.getData("Text");e.paste(n),t.clipboardData.setData("Text",""),t.clipboardData.clearData("Text")}),this.canvas=new fabric.Canvas("canvas",{preserveObjectStacking:!0});var n=this.canvas;fabric.Canvas.prototype.rotationCursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NzBBQTBGQ0Y4ODcxMUVBQURGNkU5NzQ3OUY4RTA5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NzBBQTBGREY4ODcxMUVBQURGNkU5NzQ3OUY4RTA5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk3MEFBMEZBRjg4NzExRUFBREY2RTk3NDc5RjhFMDk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk3MEFBMEZCRjg4NzExRUFBREY2RTk3NDc5RjhFMDk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QUJwRwAAAytJREFUeNrsVk1oGkEUXqVIqCRIhVICEsSTkFuwEPDaWiQ9NaQx6VGRaqCHQATBEFMKKUoLos0h4LV4aWxCbyqhEbx4CJJCwJMJRKVWxJ/EkJ/X9yabZd2oay+hhX7wsbPz3sybmTfv21UAAHdXUHJ3iL8rmEKh0CHdyASyhAQRC8gQ0izyNyCD9Lw1GeWsFxFvdDoduN1uSCQSUCqVQIxCoQChUAjMZjM5B5DTw8PDEAwG6f3Trfl6BFEgQzMzM3BwcAByaDabYLPZYHR0FJLJJOu73sdgwd65XC44Pz8XJjw+PoZYLAZ+vx+8Xi/b6enpqWBvtVqwu7vL2u12myZpywZDOCcnJ6FarbKBV1dXEI1GwWg0gkqlIgc/0qtWq2FiYgI2NjagVqt17LRer5NfvW8wxH0E7O3tCQMXFxfJEEWakCqRrxr5lBaQyWQ6gjUaDXJoyAV7gYDLy0s2iJJPiaZFdDmBRyMjI7C5udk1h2hvygX7jGADTk5OgG4i9hlFditym6ef8tcL3S7IPUklPEawRjqd5orFIjXzfP08M5lM35aXl5l9dXV1amtri8tms5xU8s7Ozuix3rfOEL8QbGWBQIDVjsj2FSGsnNrUh3yOnJLwSbdbLt3ZT8QDxM2uiiIbXR7xC8fncpvf+cOhoaGywWDgsNjpfRxtP/rJVZEPwlFAeohs67hbLpVKMVJbclSvPR4Pt7+/z62trbF3uWP8gmDHdHh4CBqNhjo1Ivs0MslzWtSvo8uEC2VjMd/UmZa7ja8QcHFxwQYtLS1R50cZ/SRpC66srAj59Pl8ZPANoiDfEYLszM3NUecHpFbiRykYR0ZI2kiuCEdHR6DX68lBP0gwm8ViYZJDIP1bWFgArVZ7o+x2pEupVMLY2BhEIhEmaQQSg/n5efLzdj2FHkfzfnZ2FiqVinA0+XyelYPdbgfaCWliuVzuUA2n00mDwz2PvE8u3mKBQzwel/3E7OzsAJ2GuC7/KBgf0IKMW61WCIfDkMvlmMiiQrCvApYAOBwO9tVGv5f95pINJtHEMDJHak6KhKwiU0gH3chB5lH8/5X754L9FmAAxKqp09gZRrsAAAAASUVORK5CYII=) 12 12, auto",fabric.Object.prototype.originX="center",fabric.Object.prototype.originY="center",n.selection=!0,fabric.Canvas.prototype.customiseControls({tl:{action:"scale"},tr:{action:"scale"},bl:{action:"scale"},br:{action:"scale"},mb:{action:"scaleY"},mt:{action:"scaleY"},mr:{action:"scaleX"},ml:{action:"scaleX"},mtr:{action:"rotate"}});var o=0,i=0,s=null;this.canvas.controlsAboveOverlay=!1,this.canvas.skipOffscreen=!0,this.canvas.preserveObjectStacking=!0,this.canvas.on("selection:created",function(t){e.$emit("selection:created",t),o=t.target.top,i=t.target.left}),this.canvas.on("mouse:down",function(t){e.$emit("mouse:down",t)}),this.canvas.on("mouse:up",function(t){e.$emit("mouse:up",t)}),this.canvas.on("mouse:move",function(t){e.$emit("mouse:move",t)}),this.canvas.on("mouse:dblclick",function(t){e.$emit("mouse:dblclick",t),console.log("dblclick",t)}),this.canvas.on("mouse:over",function(t){e.$emit("mouse:over",t)}),this.canvas.on("mouse:out",function(t){e.$emit("mouse:out",t)}),this.canvas.on("object:added",function(t){e.$emit("object:added",t)}),this.canvas.on("object:removed",function(t){e.$emit("object:removed",t)}),this.canvas.on("object:moved",function(t){e.$emit("object:moved",t),o=t.target.top,i=t.target.left,s=null}),this.canvas.on("object:modified",function(t){e.$emit("object:modified",t),t.target._objects||(t.target.set("left",parseInt(t.target.left)),t.target.set("top",parseInt(t.target.top)),t.target.set("width",parseInt(t.target.width*t.target.scaleX)),t.target.set("height",parseInt(t.target.height*t.target.scaleY)),t.target.set("scaleX",1),t.target.set("scaleY",1),t.target.set("angle",parseInt(t.target.angle))),o=t.target.top,i=t.target.left,s=null}),this.canvas.on("object:rotating",function(t){e.$emit("object:rotating",t)}),this.canvas.on("object:scaling",function(t){e.$emit("object:scaling",t)}),this.canvas.on("object:scaled",function(t){if(e.$emit("object:scaled",t),t.target._objects){var n=[],o=t.target._objects;e.discardActive(),o.forEach(function(t){n.push(t.id),t.set("width",parseInt(t.width*t.scaleX)),t.set("height",parseInt(t.height*t.scaleY)),t.set("scaleX",1),t.set("scaleY",1)}),e.setActiveObjs(n)}}),this.canvas.on("object:selected",function(t){e.$emit("object:selected",t)}),this.canvas.on("object:moving",function(t){e.$emit("object:moving",t),t.target._objects?t.transform.altKey&&("x"===s||Math.abs(t.target.left-i)>Math.abs(t.target.top-o)?(Math.abs(t.target.left-i)>18&&(s="x"),t.target.set("top",o)):("y"===s||Math.abs(t.target.left-i)<Math.abs(t.target.top-o))&&(Math.abs(t.target.top-o)>18&&(s="y"),t.target.set("left",i))):t.transform.shiftKey&&("x"===s||Math.abs(t.target.left-i)>Math.abs(t.target.top-o)?(Math.abs(t.target.left-i)>18&&(s="x"),t.target.set("top",o)):("y"===s||Math.abs(t.target.left-i)<Math.abs(t.target.top-o))&&(Math.abs(t.target.top-o)>18&&(s="y"),t.target.set("left",i)))}),this.canvas.on("selection:updated",function(t){e.$emit("selection:updated",t),console.log("000   selection:updated")}),this.canvas.on("selection:changed",function(t){e.$emit("selection:changed",t),console.log("111   selection:changed")}),this.canvas.on("selection:cleared",function(t){e.$emit("selection:cleared",t),console.log("222  selection:cleared")}),this.canvas.on("before:selection:cleared",function(t){e.$emit("before:selection:cleared",t),console.log("333  before:selection:cleared")}),this.canvas.on("text:changed",function(t){e.$emit("text:changed",t)}),this.canvas.on("text:editing:entered",function(t){e.$emit("text:editing:entered",t)}),this.canvas.on("before:render"),this.canvas.on("after:render"),this.canvas.on("dragover"),this.canvas.on("dragenter"),this.canvas.on("dragleave"),this.canvas.on("drop"),this.initBgRect(),this.scaleCalc(),Object(f.a)(n)},methods:{showMenu:function(){for(var t=this.canvas,e=event.clientX,n=event.clientY,o=t.getObjects(),i=o.length-1;i>=0;i--){var s=o[i];if(console.log(s.component),"component"===s.component){if(t.containsPoint(event,s))return this.setActiveObject(s),this.contextMenuData.axis={x:e,y:n},void event.preventDefault()}else event.preventDefault()}},setScroll:function(t,e){this.scrollxW=this.boxWidth*this.boxWidth/t,this.scrollyH=this.boxHeight*this.boxHeight/e},returnXYshow:function(t){return!0===t?"visible":"hidden"},returnXYshowcanvas:function(t,e){return!0===t&&!0===e?18:0},show:function(t){document.getElementById("yZhou").scrollTop=document.getElementById("content").firstChild.childNodes[4].scrollTop,document.getElementById("xZhou").scrollLeft=document.getElementById("content").firstChild.childNodes[4].scrollLeft},yshow:function(t){document.getElementsByClassName("gm-scroll-view")[0].scrollTop=document.getElementById("yZhou").scrollTop,document.getElementsByClassName("gm-scroll-view")[0].scrollLeft=document.getElementById("xZhou").scrollLeft},yshowadd:function(){var t=void 0,e=void 0;if(this.boxHeight/2-this.height*this.canvasZoom/2>0){var n=this.boxHeight*(this.canvasZoom-1)/2,o=this.boxHeight*this.canvasZoom/2-this.height*this.canvasZoom/2;t=n<o?n:o}else t=this.boxHeight*this.canvasZoom/2-this.height*this.canvasZoom/2;if(this.boxWidth/2-this.width*this.canvasZoom/2>0){var i=this.boxWidth*(this.canvasZoom-1)/2,s=this.boxWidth*this.canvasZoom/2-this.width*this.canvasZoom/2;e=i<s?i:s}else e=this.boxWidth*this.canvasZoom/2-this.width*this.canvasZoom/2;document.getElementById("content").firstChild.childNodes[4].scrollTop=document.getElementById("yZhou").scrollTop=t,document.getElementById("content").firstChild.childNodes[4].scrollLeft=document.getElementById("xZhou").scrollLeft=e},scaleCalc:function(){var t=this.width>this.boxWidth?this.width:this.boxWidth,e=this.height>this.boxHeight?this.height:this.boxHeight;this.xScale=this.getCalc(this.xScale,t*this.canvasZoom,"x"),this.yScale=this.getCalc(this.yScale,e*this.canvasZoom,"y")},getCalc:function(t,e,n){if(t=[],"x"===n)for(var o=this.xLeft;o<e*this.stepLength/50;o+=this.stepLength)this.translateX=-o%this.stepLength-18,o%this.stepLength<0?t.push({id:o-o%this.stepLength-this.stepLength}):t.push({id:o-o%this.stepLength});else if("y"===n)for(var i=this.yTop;i<e*this.stepLength/50;i+=this.stepLength)this.translateY=-i%this.stepLength-18,i%this.stepLength<0?t.push({id:i-i%this.stepLength-this.stepLength}):t.push({id:i-i%this.stepLength});else{console.log("未计算");for(var s=0;s<e*this.stepLength/50;s+=this.stepLength)s%this.stepLength==0&&t.push({id:s})}return t},setStackingtrue:function(){this.canvas.preserveObjectStacking=!0},getEditObj:function(){return this.canvas.getActiveObject()},getActiveObject:function(){return this.canvas.getActiveObject()},setActiveObject:function(t){this.canvas.setActiveObject(t),this.canvas.renderAll()},setActiveObjs:function(t){var e=this,n=[];t.forEach(function(t){e.canvas.getObjects().forEach(function(e){e.id===t&&n.push(e)})});var o=new fabric.ActiveSelection(n,{canvas:this.canvas});this.canvas.setActiveObject(o),this.canvas.requestRenderAll(),this.canvas.renderAll()},setActiveObjects:function(t){var e=new fabric.ActiveSelection(t,{canvas:this.canvas});this.canvas.setActiveObject(e),this.canvas.requestRenderAll(),this.canvas.renderAll()},removeCurrentObj:function(){var t=this.canvas.getActiveObject(),e=[];if(t._objects){this.canvas.discardActiveObject();for(var n in t._objects)e.push(t._objects[n].id),this.canvas.remove(t._objects[n])}else e.push(t.id),this.canvas.remove(t);return this.canvas.renderAll(),e},removeEditObj:function(){var t=this.canvas.getActiveObject();this.canvas.remove(t)},removeObj:function(t){this.canvas.remove(t),this.canvas.renderAll()},addObj:function(t){this.canvas.add(t),this.canvas.renderAll()},setZoom:function(t){this.canvasZoom=t;var e=this.width>this.boxWidth?this.width:this.boxWidth,n=this.height>this.boxHeight?this.height:this.boxHeight;this.canvas.setWidth(e*this.canvasZoom),this.canvas.setHeight(n*this.canvasZoom),this.canvas.setZoom(t),this.canvas.renderAll()},ChangeZoom:function(t){this.canvasZoom=this.canvas.getZoom();var e=this.width>this.boxWidth?this.width:this.boxWidth,n=this.height>this.boxHeight?this.height:this.boxHeight;if(1===t){if(console.log(e*this.canvasZoom),e*this.canvasZoom>1e4||n*this.canvasZoom>1e4)return;this.canvasZoom=this.canvasZoom+.1,this.canvas.setWidth(e*this.canvasZoom),this.canvas.setHeight(n*this.canvasZoom),this.canvas.setZoom(this.canvasZoom),this.yshowadd(),this.canvas.renderAll()}else if(0===t){if(e*(this.canvasZoom-.1)<this.boxWidth||n*(this.canvasZoom-.1)<this.boxHeight)return;this.canvasZoom=this.canvasZoom-.1,this.canvas.setWidth(e*this.canvasZoom),this.canvas.setHeight(n*this.canvasZoom),this.canvas.setZoom(this.canvasZoom),this.yshowadd(),this.canvas.renderAll()}console.log("zoom:",this.canvasZoom)},setbackground:function(t){this.canvas.backgroundColor=t,this.canvas.renderAll()},discardActive:function(){this.canvas.discardActiveObject(),this.canvas.requestRenderAll(),this.canvas.renderAll()},moveToshow:function(t,e){this.canvas.moveTo(t,e),this.canvas.requestRenderAll(),this.canvas.renderAll()},setWidth:function(t){this.canvas.setWidth(t)},setHeight:function(t){this.canvas.setHeight(t)},setShow:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id===t&&(e[n].set("selectable",!0),e[n].set("visible",!0),e[n].set("opacity",1),this.canvas.requestRenderAll(),this.canvas.renderAll())},setHidden:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id===t&&(e[n].set("selectable",!1),e[n].set("visible",!1),e[n].set("opacity",0),this.canvas.requestRenderAll(),this.canvas.renderAll())},setNomove:function(){this.canvas.selection=!1,this.canvas.renderAll()},rename:function(t,e){var n=this.canvas.getObjects();for(var o in n)n[o].id===t&&(n[o].set("name",e),this.canvas.requestRenderAll())},toNextLayer:function(){var t=this.canvas.getActiveObject();t&&(t.sendBackwards(!0),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop())},toBottomLayer:function(){var t=this.canvas.getActiveObject();t&&(t.sendToBack(),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop())},toLastLayer:function(){var t=this.canvas.getActiveObject();t&&(t.bringForward(!0),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop())},toTopLayer:function(){var t=this.canvas.getActiveObject();t&&(t.bringToFront(),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop())},copyData:function(){var t=this.canvas.getActiveObject();if(void 0!=t&&null!=t){if(t._objects){var e=JSON.parse(u()(t._objects)),n=[];return e.map(function(e){e.top=t.top+e.top,e.left=t.left+e.left,n.push(e)}),"#ZKONG#"+escape(u()(n))}return console.log("单个元素复制"),"#ZKONG#"+escape(u()(t))}},paste:function(t){if(null!=this.clipboard&&(this.canvas.discardActiveObject(),"#ZKONG#"===t.substring(0,7))){var e=JSON.parse(unescape(t.substring(7,t.length)));if(e instanceof Array){console.log("多个元素");var n=[];for(var o in e){this.cid=this.cid+1;var i=e[o];i.id=this.cid,i.top=i.top+10,i.left=i.left+10;var s=this.addObject(i);n.push(s),this.$emit("idAdd",1)}var a=new fabric.ActiveSelection(n,{canvas:this.canvas});this.canvas.setActiveObject(a)}else{console.log("单个元素"),this.cid=this.cid+1;var r=void 0;e.id=this.cid,e.top=e.top+10,e.left=e.left+10,r=this.addObject(e),this.canvas.setActiveObject(r),this.$emit("idAdd")}this.clipboard=null,this.canvas.requestRenderAll()}},copypaste:function(){var t=this.copyData();this.clipboard=t,this.paste(t)},addObject:function(t){switch(t.isType){case"Rect":return t.left=t.left+this.xLeft,t.top=t.top+this.yTop,this.createRect(t)}},initBgRect:function(t){var e,n,o=0,s=0;o=this.boxWidth>this.width*this.canvasZoom?this.boxWidth/2-this.width/2:0,s=this.boxHeight>this.height*this.canvasZoom?this.boxHeight/2-this.height/2:0,console.log("灰色区域：",o,s),this.xLeft=-o,this.yTop=-s,this.scaleCalc(),t=c()({width:this.width,height:this.height,left:0,top:0,padding:0,angle:0,scaleX:1,scaleY:1},t);var r=new fabric.Rect(a()({},t,{left:o,top:s,type:"sBg",name:"background",component:"bg",isType:"Rect",isDiff:"none",selectable:!1,visible:!0,fill:t.fill?t.fill:"#fff",fillColor:t.fillColor?t.fillColor:"#fff",flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0,hoverCursor:"default",evented:!1,excludeFromExport:!0,hasControls:!1,perPixelTargetFind:!1,strokeWidth:0,stroke:null}));(e=this.canvas).remove.apply(e,i()(this.canvas.getObjects("sBg"))),this.canvas.add(r),r.sendToBack();var l=void 0,u=void 0,h=void 0,f=void 0;this.boxWidth>this.width*this.canvasZoom?(l=this.boxWidth/2-this.width/2,u=l+this.width):(l=0,u=this.width),this.boxHeight>this.height*this.canvasZoom?(h=this.boxHeight/2-this.height/2,f=h+this.height):(h=0,f=this.height);var d=[0,l,u,u+l],v=[0,h,f,f+h],p={selectable:!1,fill:"#f1f1f1",hoverCursor:"default",evented:!1,excludeFromExport:!0,hasControls:!1,perPixelTargetFind:!1,strokeWidth:0,stroke:null,originX:"left",originY:"top"},m=new fabric.Rect({left:d[0],top:v[0],width:d[1]-d[0],height:v[3]-v[0]}),g=new fabric.Rect({left:d[1],top:v[0],width:d[3]-d[1]+2,height:v[1]-v[0]}),b=new fabric.Rect({left:d[2],top:v[1]-1,width:d[3]-d[2],height:v[2]-v[1]+2}),y=new fabric.Rect({left:d[1],top:v[2],width:d[3]-d[1],height:v[3]-v[2]});m.set(a()({name:"mask1"},p)),g.set(a()({name:"mask2"},p)),b.set(a()({name:"mask3"},p)),y.set(a()({name:"mask4"},p));var x=new fabric.Group([m,g,b,y],{originX:"left",originY:"top",selectable:!1,excludeFromExport:!0,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hoverCursor:"auto",name:"grid",left:0,top:0,type:"sMask",evented:!1});(n=this.canvas).remove.apply(n,i()(this.canvas.getObjects("sMask"))),this.canvas.add(x),x.bringToFront(),this.canvas.renderTop(),this.canvas.renderAll()},setTop:function(){var t=this;this.canvas.getObjects().forEach(function(e){"sMask"==e.type&&(e.bringToFront(),t.canvas.renderTop(),t.canvas.renderAll()),"sBg"==e.type&&(e.sendToBack(),t.canvas.renderTop(),t.canvas.renderAll())})},createRect:function(t){t=c()({width:50,height:30,left:-this.xLeft,top:-this.yTop,padding:0,angle:0,scaleX:1,scaleY:1},t);var e=new fabric.Rect(a()({},t,{left:-this.xLeft+t.left,top:-this.yTop+t.top,id:t.id,name:t.name?t.name:"Rect",component:"component",isType:"Rect",isDiff:"static",selectable:!1!==t.selectable||t.selectable,visible:!1!==t.visible||t.visible,fill:t.fill?t.fill:"#000",fillColor:t.fillColor?t.fillColor:"#000",backgroundColor:t.backgroundColor?t.backgroundColor:"rgba(0,0,0,0)",stroke:t.stroke?t.stroke:"rgba(0,0,0,0)",strokeWidth:t.strokeWidth?t.strokeWidth:0,strokeDashArray:t.strokeDashArray?t.strokeDashArray:[0,0],minScaleLimit:1e-4,flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0}));return e.setCoords(),this.canvas.add(e),this.setTop(),this.canvas.renderAll(),e},createCircle:function(t){t=c()({left:0,top:0,radius:30,fillColor:"rgba(255, 255, 255, 0)",color:"#B2B2B2",drawWidth:2},t);var e=a()({},t,{fill:t.fillColor,strokeWidth:t.drawWidth,stroke:t.color}),n=new fabric.Circle(e);this.canvas.add(n),this.canvas.renderAll()},createText:function(t,e){e=c()({left:100,top:100},e);var n=new fabric.Textbox(t,a()({},e,{left:-this.xLeft+e.left,top:-this.yTop+e.top,id:e.id,name:e.name?e.name:"Text",component:"component",isType:"Text",isDiff:"static",textAlign:"left"}));this.canvas.add(n),this.canvas.renderAll()}}}},function(t,e){t.exports=!0},function(t,e,n){var o=n(44);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,i){return t.call(e,n,o,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var o=n(12),i=n(3).document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},function(t,e,n){var o=n(51),i=n(29);t.exports=Object.keys||function(t){return o(t,i)}},function(t,e,n){var o=n(24),i=n(11);t.exports=function(t){return o(i(t))}},function(t,e,n){var o=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o=n(10),i=Math.min;t.exports=function(t){return t>0?i(o(t),9007199254740991):0}},function(t,e,n){var o=n(0),i=n(3),s=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:n(19)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var o=n(4).f,i=n(8),s=n(1)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,s)&&o(t,s,{configurable:!0,value:e})}},function(t,e,n){t.exports={default:n(64),__esModule:!0}},function(t,e,n){"use strict";var o=n(81);e.a={name:"contextmenu",components:{Tree:o.a},data:function(){return{floatDirection:"float-statue-1"}},props:{contextMenuData:{type:Object,requred:!1,default:function(){return{menuName:null,axis:{x:null,y:null},menulists:[{fnHandler:"",icoName:"",btnName:""}]}}},transferIndex:{type:Number,default:0}},watch:{"contextMenuData.axis":function(t){var e=t.x,n=t.y,o=window.innerWidth,i=window.innerHeight,s=this,a=s.transferIndex,r="vue-contextmenuName-"+s.contextMenuData.menuName,c=document.getElementsByClassName(r)[a];c.style.display="block";var l=30*this.contextMenuData.menulists.length;c.style.top=(n+l>i?i-l:n)+"px",c.style.left=(e+150>o?o-150:e)+"px",document.addEventListener("mouseup",function(t){0!==t.button&&2!==t.button||(c.style.display="none")},!1),e+300>o&&n+2*l>i&&(this.floatDirection="float-status-4"),e+300<o&&n+2*l>i&&(this.floatDirection="float-status-1"),e+300>o&&n+2*l<i&&(this.floatDirection="float-status-3"),e+300<o&&n+2*l<i&&(this.floatDirection="float-status-2")}},methods:{fnHandler:function(t){this.$emit(t.fnHandler)}}}},function(t,e,n){"use strict";e.a={name:"tree-child-component",props:["itemchildren","float"],methods:{fnHandler:function(t){this.$emit("childhandler",t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(35);n.d(e,"FabricCanvas",function(){return o.a})},function(t,e,n){"use strict";var o=n(36),i={install:function(t){t.component(o.a.name,o.a)}};e.a=i},function(t,e,n){"use strict";function o(t){n(37)}var i=n(18),s=n(85),a=n(9),r=o,c=a(i.a,s.a,!1,r,"data-v-5f826848",null);e.a=c.exports},function(t,e){},function(t,e,n){"use strict";e.__esModule=!0;var o=n(39),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i.default)(t)}},function(t,e,n){t.exports={default:n(40),__esModule:!0}},function(t,e,n){n(41),n(56),t.exports=n(0).Array.from},function(t,e,n){"use strict";var o=n(42)(!0);n(43)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var o=n(10),i=n(11);t.exports=function(t){return function(e,n){var s,a,r=String(i(e)),c=o(n),l=r.length;return c<0||c>=l?t?"":void 0:(s=r.charCodeAt(c),s<55296||s>56319||c+1===l||(a=r.charCodeAt(c+1))<56320||a>57343?t?r.charAt(c):s:t?r.slice(c,c+2):a-56320+(s-55296<<10)+65536)}}},function(t,e,n){"use strict";var o=n(19),i=n(5),s=n(47),a=n(6),r=n(15),c=n(48),l=n(30),u=n(55),h=n(1)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,p,m,g){c(n,e,v);var b,y,x,w=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},j=e+" Iterator",A="values"==p,O=!1,C=t.prototype,E=C[h]||C["@@iterator"]||p&&C[p],Z=E||w(p),_=p?A?w("entries"):Z:void 0,k="Array"==e?C.entries||E:E;if(k&&(x=u(k.call(new t)))!==Object.prototype&&x.next&&(l(x,j,!0),o||"function"==typeof x[h]||a(x,h,d)),A&&E&&"values"!==E.name&&(O=!0,Z=function(){return E.call(this)}),o&&!g||!f&&!O&&C[h]||a(C,h,Z),r[e]=Z,r[j]=d,p)if(b={values:A?Z:w("values"),keys:m?Z:w("keys"),entries:_},g)for(y in b)y in C||s(C,y,b[y]);else i(i.P+i.F*(f||O),e,b);return b}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports=!n(2)&&!n(13)(function(){return 7!=Object.defineProperty(n(21)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(12);t.exports=function(t,e){if(!o(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!o(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var o=n(49),i=n(14),s=n(30),a={};n(6)(a,n(1)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(a,{next:i(1,n)}),s(t,e+" Iterator")}},function(t,e,n){var o=n(7),i=n(50),s=n(29),a=n(16)("IE_PROTO"),r=function(){},c=function(){var t,e=n(21)("iframe"),o=s.length;for(e.style.display="none",n(54).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;o--;)delete c.prototype[s[o]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(r.prototype=o(t),n=new r,r.prototype=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var o=n(4),i=n(7),s=n(22);t.exports=n(2)?Object.defineProperties:function(t,e){i(t);for(var n,a=s(e),r=a.length,c=0;r>c;)o.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var o=n(8),i=n(23),s=n(52)(!1),a=n(16)("IE_PROTO");t.exports=function(t,e){var n,r=i(t),c=0,l=[];for(n in r)n!=a&&o(r,n)&&l.push(n);for(;e.length>c;)o(r,n=e[c++])&&(~s(l,n)||l.push(n));return l}},function(t,e,n){var o=n(23),i=n(26),s=n(53);t.exports=function(t){return function(e,n,a){var r,c=o(e),l=i(c.length),u=s(a,l);if(t&&n!=n){for(;l>u;)if((r=c[u++])!=r)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var o=n(10),i=Math.max,s=Math.min;t.exports=function(t,e){return t=o(t),t<0?i(t+e,0):s(t,e)}},function(t,e,n){var o=n(3).document;t.exports=o&&o.documentElement},function(t,e,n){var o=n(8),i=n(17),s=n(16)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),o(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var o=n(20),i=n(5),s=n(17),a=n(57),r=n(58),c=n(26),l=n(59),u=n(60);i(i.S+i.F*!n(62)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=s(t),d="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,g=0,b=u(f);if(m&&(p=o(p,v>2?arguments[2]:void 0,2)),void 0==b||d==Array&&r(b))for(e=c(f.length),n=new d(e);e>g;g++)l(n,g,m?p(f[g],g):f[g]);else for(h=b.call(f),n=new d;!(i=h.next()).done;g++)l(n,g,m?a(h,p,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){var o=n(7);t.exports=function(t,e,n,i){try{return i?e(o(n)[0],n[1]):e(n)}catch(e){var s=t.return;throw void 0!==s&&o(s.call(t)),e}}},function(t,e,n){var o=n(15),i=n(1)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[i]===t)}},function(t,e,n){"use strict";var o=n(4),i=n(14);t.exports=function(t,e,n){e in t?o.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var o=n(61),i=n(1)("iterator"),s=n(15);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||s[o(t)]}},function(t,e,n){var o=n(25),i=n(1)("toStringTag"),s="Arguments"==o(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:s?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var o=n(1)("iterator"),i=!1;try{var s=[7][o]();s.return=function(){i=!0},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var s=[7],a=s[o]();a.next=function(){return{done:n=!0}},s[o]=function(){return a},t(s)}catch(t){}return n}},function(t,e,n){"use strict";e.__esModule=!0;var o=n(31),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}},function(t,e,n){n(65),t.exports=n(0).Object.assign},function(t,e,n){var o=n(5);o(o.S+o.F,"Object",{assign:n(66)})},function(t,e,n){"use strict";var o=n(2),i=n(22),s=n(67),a=n(68),r=n(17),c=n(24),l=Object.assign;t.exports=!l||n(13)(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=o})?function(t,e){for(var n=r(t),l=arguments.length,u=1,h=s.f,f=a.f;l>u;)for(var d,v=c(arguments[u++]),p=h?i(v).concat(h(v)):i(v),m=p.length,g=0;m>g;)d=p[g++],o&&!f.call(v,d)||(n[d]=v[d]);return n}:l},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports={default:n(70),__esModule:!0}},function(t,e,n){var o=n(0),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){return document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}();!function(){document.removeEventListener}()},function(t,e,n){"use strict";var o=n(73),i=n.n(o),s=n(74),a=n.n(s),r=function(){function t(){i()(this,t)}return a()(t,[{key:"registeObjectEvent",value:function(t,e){console.log("registeObjectEvent"),e.on("mousedown",function(n){t.$emit("object:mousedown",e,n)}),e.on("mouseup",function(n){t.$emit("object:mouseup",e,n)}),e.on("mousemove",function(n){t.$emit("object:mousemove",e,n)}),e.on("mouseover",function(n){t.$emit("object:mouseover",e,n)}),e.on("mouseout",function(n){t.$emit("object:mouseout",e,n)}),e.on("mousedblclick",function(n){t.$emit("object:mousedblclick",e,n)}),e.on("mousewheel",function(n){t.$emit("object:mousewheel",e,n)})}}]),t}();new r},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var o=n(75),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i.default)(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},function(t,e,n){t.exports={default:n(76),__esModule:!0}},function(t,e,n){n(77);var o=n(0).Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},function(t,e,n){var o=n(5);o(o.S+o.F*!n(2),"Object",{defineProperty:n(4).f})},function(t,e,n){"use strict";function o(t){function e(t){o(t.x+.5,t.y1>t.y2?t.y2:t.y1,t.x+.5,t.y2>t.y1?t.y2:t.y1)}function n(t){o(t.x1>t.x2?t.x2:t.x1,t.y+.5,t.x2>t.x1?t.x2:t.x1,t.y+.5)}function o(t,e,n,o){a.save(),a.lineWidth=c,a.strokeStyle=l,a.setLineDash([5,1]),a.beginPath(),a.moveTo((t+s[4])*u,(e+s[5])*u),a.lineTo((n+s[4])*u,(o+s[5])*u),a.stroke(),a.restore()}function i(t,e){t=Math.round(t),e=Math.round(e);for(var n=t-r,o=t+r;n<=o;n++)if(n===e)return!0;return!1}var s,a=t.getSelectionContext(),r=5,c=1,l="rgb(0,0,0,0.6)",u=1,h=[],f=[];t.on("mouse:down",function(){s=t.viewportTransform,u=t.getZoom()}),t.on("object:moving",function(e){var n=e.target,o=t.getObjects(),a=n.getCenterPoint(),r=a.x,c=a.y,l=n.getBoundingRect(),u=l.height/s[3],d=l.width/s[0],v=!1,p=!1;if(t._currentTransform){for(var m=o.length;m--;)if(o[m]!==n&&0!==o[m].opacity&&!1!==o[m].visible&&!1!==o[m].selectable){var g=o[m].getCenterPoint(),b=g.x,y=g.y,x=o[m].getBoundingRect(),w=x.height/s[3],j=x.width/s[0];i(b,r)&&(p=!0,h.push({x:b,y1:y<c?y-w/2-5:y+w/2+5,y2:c>y?c+u/2+5:c-u/2-5}),n.setPositionByOrigin(new fabric.Point(b,c),"center","center")),i(b-j/2,r-d/2)&&(p=!0,h.push({x:b-j/2,y1:y<c?y-w/2-5:y+w/2+5,y2:c>y?c+u/2+5:c-u/2-5}),n.setPositionByOrigin(new fabric.Point(b-j/2+d/2,c),"center","center")),i(b+j/2,r+d/2)&&(p=!0,h.push({x:b+j/2,y1:y<c?y-w/2-5:y+w/2+5,y2:c>y?c+u/2+5:c-u/2-5}),n.setPositionByOrigin(new fabric.Point(b+j/2-d/2,c),"center","center")),i(y,c)&&(v=!0,f.push({y:y,x1:b<r?b-j/2-5:b+j/2+5,x2:r>b?r+d/2+5:r-d/2-5}),n.setPositionByOrigin(new fabric.Point(r,y),"center","center")),i(y-w/2,c-u/2)&&(v=!0,f.push({y:y-w/2,x1:b<r?b-j/2-5:b+j/2+5,x2:r>b?r+d/2+5:r-d/2-5}),n.setPositionByOrigin(new fabric.Point(r,y-w/2+u/2),"center","center")),i(y+w/2,c+u/2)&&(v=!0,f.push({y:y+w/2,x1:b<r?b-j/2-5:b+j/2+5,x2:r>b?r+d/2+5:r-d/2-5}),n.setPositionByOrigin(new fabric.Point(r,y+w/2-u/2),"center","center"))}v||(f.length=0),p||(h.length=0)}}),t.on("before:render",function(){void 0!==t._target&&t.clearContext(t.contextTop)}),t.on("after:render",function(){for(var t=h.length;t--;)e(h[t]);for(var t=f.length;t--;)n(f[t]);h.length=f.length=0}),t.on("mouse:up",function(){h.length=f.length=0,t.renderAll()})}e.a=o},function(t,e,n){"use strict";function o(t){n(80)}var i=n(32),s=n(84),a=n(9),r=o,c=a(i.a,s.a,!1,r,"data-v-3b6631fc",null);e.a=c.exports},function(t,e){},function(t,e,n){"use strict";function o(t){n(82)}var i=n(33),s=n(83),a=n(9),r=o,c=a(i.a,s.a,!1,r,"data-v-8b5ed618",null);e.a=c.exports},function(t,e){},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"child-ul-wrapper",class:t.float},t._l(t.itemchildren,function(e){return n("li",{key:e.name,staticClass:"child-li-wrapper"},[e.children&&e.children.length>0?n("div",{staticClass:"has-child"},[n("div",{staticClass:"parent-name btn-wrapper-simple"},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))]),t._v(" "),n("i",{staticClass:"icon"})]),t._v(" "),n("tree-child-component",{attrs:{itemchildren:e.children,float:t.float},on:{childhandler:t.fnHandler}})],1):n("div",[n("div",{staticClass:"no-child-btn btn-wrapper-simple",on:{click:function(n){return n.stopPropagation(),t.fnHandler(e)}}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))])])])])}),0)},i=[],s={render:o,staticRenderFns:i};e.a=s},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"vue-contextmenu-listWrapper",class:"vue-contextmenuName-"+t.contextMenuData.menuName,on:{contextmenu:function(t){t.stopPropagation()}}},t._l(t.contextMenuData.menulists,function(e){return n("li",{key:e.btnName,staticClass:"context-menu-list"},[e.children&&e.children.length>0?n("div",{staticClass:"has-child"},[n("div",{staticClass:"parent-name btn-wrapper-simple",class:{"no-allow":!!e.disabled&&e.disabled}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right hoverbtn"},[t._v(t._s(e.btnName))]),t._v(" "),n("i",{staticClass:"icon hoverbicon"})]),t._v(" "),n("Tree",{attrs:{itemchildren:e.children,float:t.floatDirection},on:{childhandler:t.fnHandler}})],1):n("div",[n("div",{staticClass:"no-child-btn btn-wrapper-simple",class:{"no-allow":!!e.disabled&&e.disabled},on:{click:function(n){n.stopPropagation(),!0===e.disabled||t.fnHandler(e)}}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))])])])])}),0)},i=[],s={render:o,staticRenderFns:i};e.a=s},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bigbox",style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;",on:{contextmenu:t.showMenu}},[n("div",{staticClass:"xZhou",style:"width: "+(t.boxWidth-t.returnXYshowcanvas(t.showXzhou,t.showYzhou))+"px; visibility:"+t.returnXYshow(t.showXzhou)+";margin-left:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;",attrs:{id:"xZhou"}},[n("div",{staticClass:"x-line",style:"width: "+(t.width>t.boxWidth?t.width-t.translateX:t.boxWidth-t.translateX)+"px;transform-origin:left; transform:translateX("+((t.translateX+18)*t.canvasZoom-18)+"px) scaleX("+t.canvasZoom+") ;"},t._l(t.xScale,function(e,o){return n("span",{key:o,staticClass:"number",style:{left:50*o+2+"px"}},[t._v(t._s(e.id))])}),0)]),t._v(" "),n("div",{staticClass:"yZhou",style:"height: "+(t.boxHeight-t.returnXYshowcanvas(t.showXzhou,t.showYzhou))+"px;  visibility:"+t.returnXYshow(t.showYzhou)+";margin-top:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;",attrs:{id:"yZhou"}},[n("div",{staticClass:"y-line",style:"height:"+(t.height>t.boxHeight?t.height-t.translateY:t.boxHeight-t.translateY)+"px; transform-origin:top; transform:translateY("+((t.translateY+18)*t.canvasZoom-18)+"px) scaleY("+t.canvasZoom+") ;top:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;"},t._l(t.yScale,function(e,o){return n("span",{key:o,staticClass:"number",style:{top:50*o+2+"px"}},[t._v(t._s(e.id))])}),0)]),t._v(" "),n("div",{staticClass:"content",style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;",attrs:{id:"content"}},[n("GeminiScrollbar",{style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;"},[n("div",{staticClass:"black",style:"position: absolute; ",attrs:{id:"blackbox"}},[n("div",{staticClass:"yellow",style:"width: "+t.width*t.canvasZoom+"px;height:"+t.height*t.canvasZoom+"px; "},[n("input",{staticStyle:{position:"fixed",top:"-100px","z-index":"9999"},attrs:{type:"text",id:"code"}}),t._v(" "),n("div",{staticStyle:{position:"fixed",top:"-100px","z-index":"9999",visibility:"hidden"}},[t._v(t._s(t.clipboard))]),t._v(" "),n("canvas",{attrs:{id:"canvas",width:t.width>t.boxWidth?t.width:t.boxWidth,height:t.height>t.boxHeight?t.height:t.boxHeight}})])])]),t._v(" "),n("vue-context-menu",{attrs:{contextMenuData:t.contextMenuData},on:{toTopLayer:t.toTopLayer,toLastLayer:t.toLastLayer,toNextLayer:t.toNextLayer,toBottomLayer:t.toBottomLayer,removeEditObj:t.removeEditObj,copypaste:t.copypaste}})],1)])},i=[],s={render:o,staticRenderFns:i};e.a=s}])});