!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-fabric-canvas"]=e():t["vue-fabric-canvas"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var A=n[i]={i:i,l:!1,exports:{}};return t[i].call(A.exports,A,A.exports,e),A.l=!0,A.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=61)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(40)("wks"),A=n(30),o=n(0).Symbol,r="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=r&&o[t]||(r?o:A)("Symbol."+t))}).store=i},function(t,e,n){var i=n(0),A=n(1),o=n(7),r=n(8),a=n(12),s=function(t,e,n){var c,l,h,u=t&s.F,f=t&s.G,d=t&s.S,v=t&s.P,p=t&s.B,g=t&s.W,m=f?A:A[e]||(A[e]={}),b=m.prototype,y=f?i:d?i[e]:(i[e]||{}).prototype;f&&(n=e);for(c in n)(l=!u&&y&&void 0!==y[c])&&a(m,c)||(h=l?y[c]:n[c],m[c]=f&&"function"!=typeof y[c]?n[c]:p&&l?o(h,i):g&&y[c]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):v&&"function"==typeof h?o(Function.call,h):h,v&&((m.virtual||(m.virtual={}))[c]=h,t&s.R&&b&&!b[c]&&r(b,c,h)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var i=n(9),A=n(69),o=n(70),r=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),A)try{return r(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(10);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,A){return t.call(e,n,i,A)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(4),A=n(21);t.exports=n(6)?function(t,e,n){return i.f(t,e,A(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(5);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(7),A=n(43),o=n(44),r=n(9),a=n(16),s=n(45),c={},l={},e=t.exports=function(t,e,n,h,u){var f,d,v,p,g=u?function(){return t}:s(t),m=i(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(f=a(t.length);f>b;b++)if((p=e?m(r(d=t[b])[0],d[1]):m(t[b]))===c||p===l)return p}else for(v=g.call(t);!(d=v.next()).done;)if((p=A(v,m,d.value,e))===c||p===l)return p};e.BREAK=c,e.RETURN=l},function(t,e,n){var i=n(23),A=Math.min;t.exports=function(t){return t>0?A(i(t),9007199254740991):0}},function(t,e,n){var i=n(4).f,A=n(12),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!A(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(24);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t,e,n,i,A,o){var r,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,a=t.default);var c="function"==typeof a?a.options:a;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),A&&(c._scopeId=A);var l;if(o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=i),l){var h=c.functional,u=h?c.render:c.beforeCreate;h?(c._injectStyles=l,c.render=function(t,e){return l.call(e),u(t,e)}):c.beforeCreate=u?[].concat(u,l):[l]}return{esModule:r,exports:a,options:c}}},function(t,e,n){var i=n(5),A=n(0).document,o=i(A)&&i(A.createElement);t.exports=function(t){return o?A.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var i=n(72)(!0);n(25)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(26),A=n(3),o=n(73),r=n(8),a=n(13),s=n(74),c=n(17),l=n(79),h=n(2)("iterator"),u=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,d,v,p,g){s(n,e,d);var m,b,y,x=function(t){if(!u&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",j="values"==v,k=!1,T=t.prototype,E=T[h]||T["@@iterator"]||v&&T[v],C=E||x(v),_=v?j?x("entries"):C:void 0,O="Array"==e?T.entries||E:E;if(O&&(y=l(O.call(new t)))!==Object.prototype&&y.next&&(c(y,w,!0),i||"function"==typeof y[h]||r(y,h,f)),j&&E&&"values"!==E.name&&(k=!0,C=function(){return E.call(this)}),i&&!g||!u&&!k&&T[h]||r(T,h,C),a[e]=C,a[w]=f,v)if(m={values:j?C:x("values"),keys:p?C:x("keys"),entries:_},g)for(b in m)b in T||o(T,b,m[b]);else A(A.P+A.F*(u||k),e,m);return m}},function(t,e){t.exports=!0},function(t,e,n){var i=n(28),A=n(24);t.exports=function(t){return i(A(t))}},function(t,e,n){var i=n(14);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(40)("keys"),A=n(30);t.exports=function(t){return i[t]||(i[t]=A(t))}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(14),A=n(2)("toStringTag"),o="Arguments"==i(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=r(e=Object(t),A))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(8);t.exports=function(t,e,n){for(var A in e)n&&t[A]?t[A]=e[A]:i(t,A,e[A]);return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=A(e),this.reject=A(n)}var A=n(10);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var i,A=n(66),o=n.n(A),r=n(37),a=n.n(r),s=n(82),c=n.n(s),l=n(53),h=n.n(l),u=n(107),f=n.n(u),d=n(108),v=n.n(d),p=n(58),g=n.n(p),m=n(114),b=n.n(m),y=n(117),x=n.n(y),w=n(118),j=n.n(w),k=n(120),T=n(121),E=n(124),C=n(125);e.a={name:"FabricCanvas",components:{vueContextMenu:C.a},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},boxWidth:{type:Number,required:!0},boxHeight:{type:Number,required:!0},stepLengthp:{type:Number,default:50},showRuler:{type:Array,default:function(){return[!0,!0]}},idno:{type:Number,default:1,required:!0}},data:function(){return{name:"canvas",canvas:null,canvasZoom:1,clipboard:"",cid:1,xScale:[],yScale:[],xLeft:-200,yTop:-100,translateX:-18,translateY:-18,stepLength:this.stepLengthp,showXzhou:this.showRuler[0],showYzhou:this.showRuler[1],rulertop:0,rulerleft:0,scrollyH:100,scrollxW:50,contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"copypaste",icoName:"fa fa-home fa-fw",btnName:this.$t("m.copy")},{fnHandler:"removeEditObj",icoName:"fa fa-home fa-fw",btnName:this.$t("m.delete")}]},qrcodeImg:"",activecanvaobjs:[],activeobj:{},textareashow:!1,textdata:"abcdefg",textlines:1,style:{id:0,top:0,left:0,width:200,height:60,fontSize:20,textAlign:"left"}}},directives:{drag:{inserted:function(t,e,n){n=n.elm,t.dragstart=function(t){t.preventDefault(),document.onmousemove=document.onmouseup=null},t.ondrag=function(t){return t.preventDefault(),document.onmousemove=document.onmouseup=null,!1},t.onmousedown=function(t){var e=t.target.offsetHeight,i=t.target.offsetWidth,A=!0;if("scrollx"!==t.target.id&&"scrolly"!==t.target.id)return void(A=!1);var o=t.clientX-n.offsetLeft,r=t.clientY-n.offsetTop,a=null;"scrollx"===t.target.id?a="x":"scrolly"===t.target.id&&(a="y"),document.onmousemove=function(t){var s=void 0,c=void 0;if(s=t.clientX-o,c=t.clientY-r,"x"===a){if(t.clientY<r-60||t.clientY>r+60)return void(A=!1);if(A){var l=n.parentNode.offsetWidth-8-i;s<=18?s=18:s>=l&&(s=l),n.style.left=s+"px";var h=document.getElementById("canvas").offsetWidth-document.getElementById("content").offsetWidth+30,u=h*((s-18)/(l-18));document.getElementById("content").scrollLeft=document.getElementById("xZhou").scrollLeft=u}}else{if(t.clientX<o-60||t.clientX>o+60)return void(A=!1);if(A){var f=n.parentNode.offsetHeight-8-e;c<=18?c=18:c>=f&&(c=f),n.style.top=c+"px";var d=document.getElementById("canvas").offsetHeight-document.getElementById("content").offsetHeight+30,v=d*((c-18)/(f-18));document.getElementById("content").scrollTop=document.getElementById("yZhou").scrollTop=v}}},document.onmouseup=function(t){A=!1,document.onmousemove=document.onmouseup=null}}}}},watch:{idno:function(t,e){this.cid=t},width:function(t,e){this.initBgRect()},height:function(t,e){this.initBgRect()}},mounted:function(){function t(t,e){var n=e.target,i=n.canvas;i.remove(n),i.requestRenderAll()}var e=this;window.onresize=function(){e.rulertop=window.pageYOffset,e.rulerleft=window.pageYOffset,e.scrollxW=100,e.scrollyH=100};var n=this;Object(k.a)(document.getElementById("content").firstChild.childNodes[4],"mousewheel",this.show),Object(k.a)(document.getElementById("content").firstChild.childNodes[4],"scroll",this.show),Object(k.a)(document.getElementById("yZhou"),"mousewheel",this.yshow),Object(k.a)(document.getElementById("yZhou"),"scroll",this.yshow),Object(k.a)(document.getElementById("xZhou"),"mousewheel",this.yshow),Object(k.a)(document.getElementById("xZhou"),"scroll",this.yshow);document.onkeydown=function(t){var e=window.event.keyCode;if(event.shiftKey&&107===window.event.keyCode?n.ChangeZoom(1):event.shiftKey&&109===window.event.keyCode&&n.ChangeZoom(0),46===e){n.removeCurrentObj()}if(37===e){n.getEditObj().left=parseInt(n.getEditObj().left-1);n.getObjectsNew().forEach(function(t,e){t.id===n.getEditObj().id&&"TextRect-text"===t.isType&&(t.left=parseInt(t.left-1))}),n.getEditObj().setCoords(),n.canvas.requestRenderAll(),n.canvas.renderAll()}if(38===e){n.getEditObj().top=parseInt(n.getEditObj().top-1);n.getObjectsNew().forEach(function(t,e){t.id===n.getEditObj().id&&"TextRect-text"===t.isType&&(t.top=parseInt(t.top-1))}),n.getEditObj().setCoords(),n.canvas.requestRenderAll(),n.canvas.renderAll()}if(39===e){n.getEditObj().left=parseInt(n.getEditObj().left+1);n.getObjectsNew().forEach(function(t,e){t.id===n.getEditObj().id&&"TextRect-text"===t.isType&&(t.left=parseInt(t.left+1))}),n.getEditObj().setCoords(),n.canvas.requestRenderAll(),n.canvas.renderAll()}if(40===e){n.getEditObj().top=parseInt(n.getEditObj().top+1);n.getObjectsNew().forEach(function(t,e){t.id===n.getEditObj().id&&"TextRect-text"===t.isType&&(t.top=parseInt(t.top+1))}),n.getEditObj().setCoords(),n.canvas.requestRenderAll(),n.canvas.renderAll()}if(event.ctrlKey&&67===e){var i=n.copyData();document.getElementById("code").value=i,n.clipboard=i,document.getElementById("code").select(),document.execCommand("copy"),document.getElementById("code").value=""}event.ctrlKey,event.shiftKey&&68===e&&n.copypaste()},document.onkeyup=function(t){},document.addEventListener("paste",function(t){var e=t.clipboardData.getData("Text");"#ZKONG#"===e.substring(0,7)&&(n.paste(e),t.clipboardData.setData("Text",""),t.clipboardData.clearData("Text"))}),this.canvas=new fabric.Canvas("canvas",{preserveObjectStacking:!0});var i=this.canvas;fabric.Canvas.prototype.rotationCursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NzBBQTBGQ0Y4ODcxMUVBQURGNkU5NzQ3OUY4RTA5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NzBBQTBGREY4ODcxMUVBQURGNkU5NzQ3OUY4RTA5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk3MEFBMEZBRjg4NzExRUFBREY2RTk3NDc5RjhFMDk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk3MEFBMEZCRjg4NzExRUFBREY2RTk3NDc5RjhFMDk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QUJwRwAAAytJREFUeNrsVk1oGkEUXqVIqCRIhVICEsSTkFuwEPDaWiQ9NaQx6VGRaqCHQATBEFMKKUoLos0h4LV4aWxCbyqhEbx4CJJCwJMJRKVWxJ/EkJ/X9yabZd2oay+hhX7wsbPz3sybmTfv21UAAHdXUHJ3iL8rmEKh0CHdyASyhAQRC8gQ0izyNyCD9Lw1GeWsFxFvdDoduN1uSCQSUCqVQIxCoQChUAjMZjM5B5DTw8PDEAwG6f3Trfl6BFEgQzMzM3BwcAByaDabYLPZYHR0FJLJJOu73sdgwd65XC44Pz8XJjw+PoZYLAZ+vx+8Xi/b6enpqWBvtVqwu7vL2u12myZpywZDOCcnJ6FarbKBV1dXEI1GwWg0gkqlIgc/0qtWq2FiYgI2NjagVqt17LRer5NfvW8wxH0E7O3tCQMXFxfJEEWakCqRrxr5lBaQyWQ6gjUaDXJoyAV7gYDLy0s2iJJPiaZFdDmBRyMjI7C5udk1h2hvygX7jGADTk5OgG4i9hlFditym6ef8tcL3S7IPUklPEawRjqd5orFIjXzfP08M5lM35aXl5l9dXV1amtri8tms5xU8s7Ozuix3rfOEL8QbGWBQIDVjsj2FSGsnNrUh3yOnJLwSbdbLt3ZT8QDxM2uiiIbXR7xC8fncpvf+cOhoaGywWDgsNjpfRxtP/rJVZEPwlFAeohs67hbLpVKMVJbclSvPR4Pt7+/z62trbF3uWP8gmDHdHh4CBqNhjo1Ivs0MslzWtSvo8uEC2VjMd/UmZa7ja8QcHFxwQYtLS1R50cZ/SRpC66srAj59Pl8ZPANoiDfEYLszM3NUecHpFbiRykYR0ZI2kiuCEdHR6DX68lBP0gwm8ViYZJDIP1bWFgArVZ7o+x2pEupVMLY2BhEIhEmaQQSg/n5efLzdj2FHkfzfnZ2FiqVinA0+XyelYPdbgfaCWliuVzuUA2n00mDwz2PvE8u3mKBQzwel/3E7OzsAJ2GuC7/KBgf0IKMW61WCIfDkMvlmMiiQrCvApYAOBwO9tVGv5f95pINJtHEMDJHak6KhKwiU0gH3chB5lH8/5X754L9FmAAxKqp09gZRrsAAAAASUVORK5CYII=) 12 12, auto",fabric.Canvas.prototype.customiseControls({tl:{action:"scale"},tr:{action:t},bl:{action:"scale"},br:{action:t},mb:{action:"scaleY"},mt:{action:"scaleY"},mr:{action:t},ml:{action:"scaleX"},mtr:{action:"rotate"}}),fabric.Object.prototype.originX="center",fabric.Object.prototype.originY="center",i.selection=!0,i.controlsAboveOverlay=!1,i.skipOffscreen=!0,i.preserveObjectStacking=!0,fabric.Canvas.prototype.customiseControls({tl:{action:"scale"},tr:{action:"scale"},bl:{action:"scale"},br:{action:"scale"},mb:{action:"scaleY"},mt:{action:"scaleY"},mr:{action:"scaleX"},ml:{action:"scaleX"},mtr:{action:"rotate"}});var A=0,o=0,r=null;this.canvas.on("selection:created",function(t){n.$emit("selection:created",t),A=t.target.top,o=t.target.left}),this.canvas.on("mouse:down",function(t){n.$emit("mouse:down",t),console.log(t)}),this.canvas.on("mouse:up",function(t){n.$emit("mouse:up",t)}),this.canvas.on("mouse:move",function(t){n.$emit("mouse:move",t)}),this.canvas.on("mouse:dblclick",function(t){n.$emit("mouse:dblclick",t)}),this.canvas.on("mouse:over",function(t){n.$emit("mouse:over",t)}),this.canvas.on("mouse:out",function(t){n.$emit("mouse:out",t)}),this.canvas.on("object:added",function(t){n.$emit("object:added",t)}),this.canvas.on("object:removed",function(t){n.$emit("object:removed",t)}),this.canvas.on("object:moved",function(t){n.$emit("object:moved",t),A=t.target.top,o=t.target.left,r=null}),this.canvas.on("object:modified",function(t){n.$emit("object:modified",t),A=t.target.top,o=t.target.left,r=null}),this.canvas.on("object:rotating",function(t){n.$emit("object:rotating",t)}),this.canvas.on("object:scaling",function(t){n.$emit("object:scaling",t)}),this.canvas.on("object:scaled",function(t){n.$emit("object:scaled",t),"Qrcode"===t.target.isType&&(t.target.set("width",parseInt(t.target.width*t.target.scaleX)),t.target.set("height",parseInt(t.target.height*t.target.scaleY)),t.target.set("scaleX",1),t.target.set("scaleY",1),console.log(t.target),n.changeQrcodeImage(t.target),n.setActiveObject(t.target)),"Barcode"===t.target.isType&&n.changeBarcodeImage(t.target),setTimeout(function(){n.setTop(),n.canvas.renderAll()},10)}),this.canvas.on("object:selected",function(t){n.$emit("object:selected",t),t.target.isType}),this.canvas.on("object:moving",function(t){if(n.$emit("object:moving",t),console.log(t.target._objects),t.target._objects){var e=void 0,i=void 0,a=void 0,s=void 0,c=void 0;t.target._objects.forEach(function(t){"TextRect"===t.isType&&(e=Math.sin(fabric.util.degreesToRadians(t.angle)),i=Math.cos(fabric.util.degreesToRadians(t.angle)),a=e*t.textOffsetLeft+i*t.textOffsetTop,s=i*t.textOffsetLeft-e*t.textOffsetTop,c=t.getPointByOrigin("left","top"),console.log(e,i,a,s,c,t))});n.getObjectsNew().forEach(function(t){"TextRect-text"===t.isType&&console.warn(e,i,a,s,c,t)})}t.target._objects?t.transform.altKey&&("x"===r||Math.abs(t.target.left-o)>Math.abs(t.target.top-A)?(Math.abs(t.target.left-o)>18&&(r="x"),t.target.set("top",A)):("y"===r||Math.abs(t.target.left-o)<Math.abs(t.target.top-A))&&(Math.abs(t.target.top-A)>18&&(r="y"),t.target.set("left",o))):t.transform.shiftKey&&("x"===r||Math.abs(t.target.left-o)>Math.abs(t.target.top-A)?(Math.abs(t.target.left-o)>18&&(r="x"),t.target.set("top",A)):("y"===r||Math.abs(t.target.left-o)<Math.abs(t.target.top-A))&&(Math.abs(t.target.top-A)>18&&(r="y"),t.target.set("left",o)))}),this.canvas.on("selection:updated",function(t){n.$emit("selection:updated",t)}),this.canvas.on("selection:changed",function(t){n.$emit("selection:changed",t)}),this.canvas.on("selection:cleared",function(t){n.$emit("selection:cleared",t)}),this.canvas.on("before:selection:cleared",function(t){n.$emit("before:selection:cleared",t)}),this.canvas.on("text:changed",function(t){n.$emit("text:changed",t)}),this.canvas.on("text:editing:entered",function(t){n.$emit("text:editing:entered",t)}),this.canvas.on("before:render"),this.canvas.on("after:render"),this.canvas.on("dragover"),this.canvas.on("dragenter"),this.canvas.on("dragleave"),this.canvas.on("drop"),this.initBgRect(),this.scaleCalc(),Object(E.a)(i)},methods:(i={drawqrcode:function(t,e){var n=jrQrcode.getQrBase64(t,{padding:e.margin?e.margin:1,width:e.width?e.width:80,height:e.height?e.height:80,correctLevel:QRErrorCorrectLevel.H,reverse:!1,background:e.background?e.background:"#ffffff",foreground:e.lineColor?e.lineColor:"#000000"});return this.qrcodeImg=n,n},showMenu:function(){for(var t=this,e=this.canvas,n=event.clientX,i=event.clientY,A=e.getObjects(),o=A.length-1;o>=0;o--){var r=A[o];if(r.visible){if("component"!==r.component){event.preventDefault();continue}if(e.containsPoint(event,r)){if("TextRect-text"===r.isType){this.getObjectsNew().forEach(function(e){e.id===r.id&&"TextRect"===e.isType&&t.setActiveObject(e)})}else this.setActiveObject(r);return this.contextMenuData.axis={x:n,y:i},void event.preventDefault()}}}},setScroll:function(t,e){this.scrollxW=this.boxWidth*this.boxWidth/t,this.scrollyH=this.boxHeight*this.boxHeight/e},returnXYshow:function(t){return!0===t?"visible":"hidden"},setNoSeeRuler:function(t){this.showYzhou=t,this.showXzhou=t},returnXYshowcanvas:function(t,e){return!0===t&&!0===e?18:0},show:function(t){document.getElementById("yZhou").scrollTop=document.getElementById("content").firstChild.childNodes[4].scrollTop,document.getElementById("xZhou").scrollLeft=document.getElementById("content").firstChild.childNodes[4].scrollLeft},yshow:function(t){document.getElementById("content").children[0].children[2].scrollTop=document.getElementById("yZhou").scrollTop,document.getElementById("content").children[0].children[2].scrollLeft=document.getElementById("xZhou").scrollLeft},yshowadd:function(){var t=void 0,e=void 0;if(this.boxHeight/2-this.height*this.canvasZoom/2>0){var n=this.boxHeight*(this.canvasZoom-1)/2,i=this.boxHeight*this.canvasZoom/2-this.height*this.canvasZoom/2;t=n<i?n:i}else t=this.boxHeight*this.canvasZoom/2-this.height*this.canvasZoom/2;if(this.boxWidth/2-this.width*this.canvasZoom/2>0){var A=this.boxWidth*(this.canvasZoom-1)/2,o=this.boxWidth*this.canvasZoom/2-this.width*this.canvasZoom/2;e=A<o?A:o}else e=this.boxWidth*this.canvasZoom/2-this.width*this.canvasZoom/2;document.getElementById("content").firstChild.childNodes[4].scrollTop=document.getElementById("yZhou").scrollTop=t,document.getElementById("content").firstChild.childNodes[4].scrollLeft=document.getElementById("xZhou").scrollLeft=e},scaleCalc:function(){var t=this.width>this.boxWidth?this.width:this.boxWidth,e=this.height>this.boxHeight?this.height:this.boxHeight;this.xScale=this.getCalc(this.xScale,t*this.canvasZoom,"x"),this.yScale=this.getCalc(this.yScale,e*this.canvasZoom,"y")},getCalc:function(t,e,n){if(t=[],"x"===n)for(var i=this.xLeft;i<e*this.stepLength/50;i+=this.stepLength)this.translateX=-i%this.stepLength-18,i%this.stepLength<0?t.push({id:i-i%this.stepLength-this.stepLength}):t.push({id:i-i%this.stepLength});else if("y"===n)for(var A=this.yTop;A<e*this.stepLength/50;A+=this.stepLength)this.translateY=-A%this.stepLength-18,A%this.stepLength<0?t.push({id:A-A%this.stepLength-this.stepLength}):t.push({id:A-A%this.stepLength});else for(var o=0;o<e*this.stepLength/50;o+=this.stepLength)o%this.stepLength==0&&t.push({id:o});return t},clickbody:function(t){this.isInRange(t.pageX,t.pageY)||(this.textareashow=!1)},isInRange:function(t,e){t=Math.round(t),e=Math.round(e);var n=document.getElementById("can").offsetLeft,i=document.getElementById("can").offsetTop;document.getElementById("content").children[0].children[2].scrollWidth,document.getElementById("content").children[0].children[2].scrollHeight;return t>this.style.left+n&&t<this.style.left+n+this.style.width&&e>this.style.top+i&&e<this.style.top+i+this.style.height},getObjects:function(){return this.canvas.getObjects()},setStackingtrue:function(){this.canvas.preserveObjectStacking=!0},getEditObj:function(){return this.canvas.getActiveObject()},getActiveObject:function(){return this.canvas.getActiveObject()},setActiveObject:function(t){this.canvas.setActiveObject(t),this.canvas.renderAll()},setActiveObjs:function(t){var e=this,n=[];t.forEach(function(t){e.canvas.getObjects().forEach(function(e){e.id===t&&n.push(e)})});var i=new fabric.ActiveSelection(n,{canvas:this.canvas});this.canvas.setActiveObject(i),this.canvas.requestRenderAll(),this.canvas.renderAll()},setActiveObjects:function(t){var e=new fabric.ActiveSelection(t,{canvas:this.canvas});this.canvas.setActiveObject(e),this.canvas.requestRenderAll(),this.canvas.renderAll()},setActiveid:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id===t&&this.canvas.setActiveObject(e[n]);this.canvas.requestRenderAll(),this.canvas.renderAll()},removeCurrentObj:function(){var t=this.canvas.getActiveObject(),e=[];if(t._objects){this.canvas.discardActiveObject();for(var n in t._objects)e.push(t._objects[n].id),this.canvas.remove(t._objects[n]);e.push(t.id),this.canvas.remove(t)}else{if("TextRect-text"===t.isType)return;e.push(t.id),this.canvas.remove(t)}return this.canvas.renderAll(),this.$emit("deleteidsdata",e),e},removeEditObj:function(){var t=this.canvas.getActiveObject();"TextRect-text"!==t.isType&&(this.$emit("deleteidsdata",[t.id]),this.canvas.remove(t))},deleteObjs:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id==t&&this.canvas.remove(e[n]);this.canvas.requestRenderAll(),this.canvas.renderAll()},removeObj:function(t){this.canvas.remove(t),this.canvas.renderAll()},addObj:function(t){this.canvas.add(t),this.canvas.renderAll()},setZoom:function(t){var e=this;this.canvasZoom=t;var n=this.width>this.boxWidth?this.width:this.boxWidth,i=this.height>this.boxHeight?this.height:this.boxHeight;this.canvas.setWidth(n*this.canvasZoom),this.canvas.setHeight(i*this.canvasZoom),this.canvas.setZoom(t),setTimeout(function(){e.yshowadd()},10),this.$emit("changeZoomTo",t),this.canvas.renderAll()},ChangeZoom:function(t){this.canvasZoom=this.canvas.getZoom();var e=this.width>this.boxWidth?this.width:this.boxWidth,n=this.height>this.boxHeight?this.height:this.boxHeight;if(1===t){if(e*this.canvasZoom>1e4||n*this.canvasZoom>1e4)return;this.canvasZoom=this.canvasZoom+.1,this.canvas.setWidth(e*this.canvasZoom),this.canvas.setHeight(n*this.canvasZoom),this.canvas.setZoom(this.canvasZoom),this.yshowadd(),this.canvas.renderAll()}else if(0===t){if(e*(this.canvasZoom-.1)<this.boxWidth||n*(this.canvasZoom-.1)<this.boxHeight)return;this.canvasZoom=this.canvasZoom-.1,this.canvas.setWidth(e*this.canvasZoom),this.canvas.setHeight(n*this.canvasZoom),this.canvas.setZoom(this.canvasZoom),this.yshowadd(),this.canvas.renderAll()}this.$emit("changeZoomTo",this.canvasZoom)},returnSmallScale:function(){this.canvasZoom=this.canvas.getZoom();var t=this.width>this.boxWidth?this.width:this.boxWidth,e=this.height>this.boxHeight?this.height:this.boxHeight;t*(this.canvasZoom-.1)<this.boxWidth||(this.canvasZoom,this.boxHeight)},setbackground:function(t){this.canvas.backgroundColor=t,this.canvas.renderAll()},discardActive:function(){this.canvas.discardActiveObject(),this.canvas.requestRenderAll(),this.canvas.renderAll()},moveToshow:function(t,e){this.canvas.moveTo(t,e),this.canvas.requestRenderAll(),this.canvas.renderAll()},setWidth:function(t){this.canvas.setWidth(t)},setHeight:function(t){this.canvas.setHeight(t)},setShow:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id===t&&(e[n].set("selectable",!0),e[n].set("visible",!0),e[n].set("opacity",1),this.canvas.requestRenderAll(),this.canvas.renderAll())},setHidden:function(t){var e=this.canvas.getObjects();for(var n in e)e[n].id===t&&(e[n].set("selectable",!1),e[n].set("visible",!1),e[n].set("opacity",0),this.canvas.requestRenderAll(),this.canvas.renderAll())},setNomove:function(){this.canvas.selection=!1,this.canvas.renderAll()},rename:function(t,e){var n=this.canvas.getObjects();for(var i in n)n[i].id===t&&(n[i].set("name",e),this.canvas.requestRenderAll())},toNextLayer:function(){var t=this.canvas.getActiveObject();t&&(t.sendBackwards(!0),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop(),this.$emit("changeLayer",t))},toBottomLayer:function(){var t=this.canvas.getActiveObject();t&&(t.sendToBack(),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop(),this.$emit("changeLayer",t))},toLastLayer:function(){var t=this.canvas.getActiveObject();t&&(t.bringForward(!0),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop(),this.$emit("changeLayer",t))},toTopLayer:function(){var t=this.canvas.getActiveObject();t&&(t.bringToFront(),this.canvas.renderTop(),this.canvas.renderAll(),this.setTop(),this.$emit("changeLayer",t))},copyData:function(){var t=this.canvas.getActiveObject();if(void 0!=t&&null!=t){if("group"===t.get("type"))return"#ZKONG#"+escape(j()(t));if("activeSelection"===t.get("type")){var e=JSON.parse(j()(t._objects)),n=[];return e.map(function(e){e.top=t.top+e.top,e.left=t.left+e.left,n.push(e)}),n[0].parentscale=[t.scaleX,t.scaleY],"#ZKONG#"+escape(j()(n))}return"#ZKONG#"+escape(j()(t))}},paste:function(t){var e=this;return x()(b.a.mark(function n(){var i,A,o,r,a,s,c;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e.clipboard){n.next=2;break}return n.abrupt("return");case 2:if(e.canvas.discardActiveObject(),"#ZKONG#"===t.substring(0,7)){n.next=5;break}return n.abrupt("return");case 5:if(!((i=JSON.parse(unescape(t.substring(7,t.length))))instanceof Array)){n.next=34;break}console.log("多个元素",i),A=[],e.activecanvaobjs=[],n.t0=b.a.keys(i);case 11:if((n.t1=n.t0()).done){n.next=29;break}return o=n.t1.value,e.$emit("idAdd"),e.cid=e.cid+1,r=i[o],r.id=e.cid,r.top=r.top+10+e.yTop,r.left=r.left+10+e.xLeft,"Barcode"===r.isType&&(r.width=r.width*r.scaleX,r.height=r.height*r.scaleY,r.scaleX=r.scaleY=1),"Text"===r.isType&&(r.width=parseInt(r.width*r.scaleX),r.height=parseInt(r.height*r.scaleY),r.scaleX=1,r.scaleY=1),"Image"===r.isType&&(r.width=parseInt(r.width*r.scaleX),r.height=parseInt(r.height*r.scaleY),r.scaleX=1,r.scaleY=1),"Image2"===r.isType&&(r.width=parseInt(r.width*r.scaleX),r.height=parseInt(r.height*r.scaleY),r.scaleX=1,r.scaleY=1),n.next=25,e.createElement(r.isType,r);case 25:a=n.sent,a&&(e.$emit("copydata",r,[a.id]),e.$emit("copyidsdata",[a.id]),A.push(a)),n.next=11;break;case 29:s=new fabric.ActiveSelection(A,{canvas:e.canvas}),s.set({scaleX:i[0].parentscale[0],scaleY:i[0].parentscale[1]}),e.canvas.setActiveObject(s),n.next=49;break;case 34:return console.log("单个元素",i),e.$emit("idAdd"),e.cid=e.cid+1,c=void 0,i.id=e.cid,i.top=i.top+10+e.yTop,i.left=i.left+10+e.xLeft,"Barcode"===i.isType&&(i.width=parseInt(i.width*i.scaleX),i.height=parseInt(i.height*i.scaleY),i.scaleX=1,i.scaleY=1),"Text"===i.isType&&(i.width=parseInt(i.width*i.scaleX),i.height=parseInt(i.height*i.scaleY),i.scaleX=1,i.scaleY=1),"Image"===i.isType&&(i.width=parseInt(i.width*i.scaleX),i.height=parseInt(i.height*i.scaleY),i.scaleX=1,i.scaleY=1),"Image2"===i.isType&&(i.width=parseInt(i.width*i.scaleX),i.height=parseInt(i.height*i.scaleY),i.scaleX=1,i.scaleY=1),n.next=47,e.createElement(i.isType,i);case 47:c=n.sent,c&&(e.$emit("copydata",i,[c.id]),e.$emit("copyidsdata",[c.id]),e.canvas.setActiveObject(c));case 49:e.clipboard=null,e.canvas.requestRenderAll();case 51:case"end":return n.stop()}},n,e)}))()},copypaste:function(){var t=this.copyData();this.clipboard=t,this.paste(t)},initBgRect:function(t){var e,n,i=0,A=0;i=this.boxWidth>this.width*this.canvasZoom?this.boxWidth/2-this.width/2:0,A=this.boxHeight>this.height*this.canvasZoom?this.boxHeight/2-this.height/2:0,this.xLeft=-i,this.yTop=-A,this.$emit("setlefttop",i,A),this.setStackingtrue(),this.scaleCalc(),t=g()({width:this.width,height:this.height,left:0,top:0,padding:0,angle:0,scaleX:1,scaleY:1},t);var o=new fabric.Rect(v()({},t,{left:i,top:A,type:"sBg",name:"background",component:"bg",isType:"Rect",isDiff:"none",selectable:!1,visible:!0,fill:t.fill?t.fill:"#fff",fillColor:t.fillColor?t.fillColor:"#fff",flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0,hoverCursor:"default",evented:!1,excludeFromExport:!0,hasControls:!1,perPixelTargetFind:!1,strokeWidth:0,stroke:null}));(e=this.canvas).remove.apply(e,f()(this.canvas.getObjects("sBg"))),this.canvas.add(o),o.sendToBack();var r=void 0,a=void 0,s=void 0,c=void 0;this.boxWidth>this.width*this.canvasZoom?(r=this.boxWidth/2-this.width/2,a=r+this.width):(r=0,a=this.width),this.boxHeight>this.height*this.canvasZoom?(s=this.boxHeight/2-this.height/2,c=s+this.height):(s=0,c=this.height);var l=[0,r,a,a+r],h=[0,s,c,c+s],u={selectable:!1,fill:"#f1f1f1",hoverCursor:"default",evented:!1,excludeFromExport:!0,hasControls:!1,perPixelTargetFind:!1,strokeWidth:0,stroke:null,originX:"left",originY:"top"},d=new fabric.Rect({left:0,top:0,width:l[1]-l[0],height:h[3]-h[0]}),p=new fabric.Rect({left:0,top:0,width:l[3]+2,height:h[1]-h[0]}),m=new fabric.Rect({left:l[2],top:0,width:l[3]-l[2],height:h[3]-h[0]+2}),b=new fabric.Rect({left:0,top:h[2],width:l[3],height:h[3]-h[2]});d.set(v()({name:"mask1"},u)),p.set(v()({name:"mask2"},u)),m.set(v()({name:"mask3"},u)),b.set(v()({name:"mask4"},u)),(n=this.canvas).remove.apply(n,f()(this.canvas.getObjects("sMask")));var y=new fabric.Group([d,p,m,b],{originX:"left",originY:"top",selectable:!1,excludeFromExport:!0,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hoverCursor:"auto",name:"grid",left:0,top:0,type:"sMask",evented:!1});this.canvas.add(y),y.bringToFront(),this.canvas.requestRenderAll(),this.canvas.renderTop(),this.canvas.renderAll()},setTop:function(){var t=this;this.canvas.getObjects().forEach(function(e){"sMask"==e.type&&(e.bringToFront(),t.canvas.renderTop(),t.canvas.renderAll()),"sBg"==e.type&&(e.sendToBack(),t.canvas.renderTop(),t.canvas.renderAll())})},toHorizontalCenterDistribution:function(){var t=this.getEditObj();if(t&&t._objects){t._objects.sort(function(t,e){return t.left-e.left});for(var e in t._objects)t._objects[e].left=e*(t.getBoundingRect().width/(this.canvasZoom*t.scaleX)/(t._objects.length-1))-t.getBoundingRect().width/(this.canvasZoom*t.scaleX)/2-e*(t._objects[e].width*t._objects[e].scaleX/(t._objects.length-1));this.canvas.renderTop(),this.canvas.renderAll()}},toVerticalCenterDistribution:function(){var t=this.getEditObj();if(t&&t._objects){t._objects.sort(function(t,e){return t.top-e.top});for(var e in t._objects)t._objects[e].top=e*(t.getBoundingRect().height/(this.canvasZoom*t.scaleY)/(t._objects.length-1))-t.getBoundingRect().height/(this.canvasZoom*t.scaleY)/2-e*(t._objects[e].height*t._objects[e].scaleY/(t._objects.length-1));this.canvas.renderTop(),this.canvas.renderAll()}},toLeftAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].left=-t.getBoundingRect().width/(this.canvasZoom*t.scaleX)/2;this.canvas.requestRenderAll(),this.canvas.renderTop(),this.canvas.renderAll()}},toHorizontalCenterAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].left=-t._objects[e].width*t._objects[e].scaleX/2;this.canvas.renderTop(),this.canvas.renderAll()}},toRightAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].left=t.getBoundingRect().width/(this.canvasZoom*t.scaleX)/2-t._objects[e].width*t._objects[e].scaleX;this.canvas.renderTop(),this.canvas.renderAll()}},toTopAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].top=-t.getBoundingRect().height/(this.canvasZoom*t.scaleY)/2;this.canvas.renderTop(),this.canvas.renderAll()}},toVerticalCenterAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].top=-t._objects[e].height*t._objects[e].scaleY/2;this.canvas.renderTop(),this.canvas.renderAll()}},toBottomAlign:function(){var t=this.getEditObj();if(t&&t._objects){for(var e in t._objects)t._objects[e].top=t.getBoundingRect().height/(this.canvasZoom*t.scaleY)/2-t._objects[e].height*t._objects[e].scaleY;this.canvas.renderTop(),this.canvas.renderAll()}},drawbarcode:function(t,e){return new h.a(function(n,i){var A=document.getElementById("barbox"),o=document.createElement("img"),r="barcode"+e.id;o.id="barcode"+e.id;var a=A.childNodes,s=[];a.forEach(function(t){s.push(t.getAttribute("id"))}),-1==s.indexOf(r)&&A.appendChild(o),JsBarcode("#barcode"+e.id,t,{format:e.format?e.format:"CODE128",lineColor:e.lineColor?e.lineColor:"#000000",margin:e.margin?e.margin:0,width:e.lineWidth?e.lineWidth:2,height:e.height?e.height:20,displayValue:!1}),document.getElementById("barcode"+e.id).onload=function(){var t=document.getElementById("barcode"+e.id).src;n(t)},document.getElementById("barcode"+e.id).onerror=function(){i(new Error("barcode is error!"))}})},createElement:function(t,e){var n=this;return x()(b.a.mark(function i(){var A,o,r,a,s,c,l,h,u,f,d,p,g,m;return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:A=n.canvas,o=n,r=void 0,a=void 0,e=v()({},e,{id:e.id?e.id:1,component:"component",isDiff:"static",padding:0,scaleX:e.scaleX?e.scaleX:1,scaleY:e.scaleY?e.scaleY:1,flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0,minScaleLimit:1e-4,lockSkewingX:!0,lockSkewingY:!0,left:e.left?-n.xLeft+e.left:-n.xLeft,top:e.top?-n.yTop+e.top:-n.yTop,width:e.width?e.width:60,height:e.height?e.height:30,angle:e.angle?e.angle:0,fill:e.fill?e.fill:"#000000",fillColor:e.fillColor?e.fillColor:"#000000",backgroundColor:e.backgroundColor?e.backgroundColor:"",stroke:e.stroke?e.stroke:"",strokeWidth:e.strokeWidth?e.strokeWidth:0,strokeDashArray:e.strokeDashArray?e.strokeDashArray:[0,0],selectable:!1!==e.selectable||e.selectable,visible:!1!==e.visible||e.visible,hasRotatingPoint:!1!==e.hasRotatingPoint||e.hasRotatingPoint}),i.t0=t,i.next="Rect"===i.t0?9:"Rectangle"===i.t0?13:"Parallelogram"===i.t0?17:"Circle"===i.t0?21:"EqualCircle"===i.t0?25:"Dottedline"===i.t0?29:"EqualTriangle"===i.t0?38:"Image"===i.t0?42:"Image2"===i.t0?46:"Image3"===i.t0?51:"equalImage"===i.t0?56:"Barcode"===i.t0?59:"Qrcode"===i.t0?63:"Text"===i.t0?67:"Time"===i.t0?70:"TextRect"===i.t0?74:"tableView"===i.t0?78:"tableList"===i.t0?83:88;break;case 9:return a=v()({},e,{isType:"Rect",name:e.name?e.name:"Rect",rx:0,ry:0}),r=new fabric.Rect(v()({},a)),r.on("scaled",function(t){t.target.set("width",parseInt(t.target.width*t.target.scaleX)),t.target.set("height",parseInt(t.target.height*t.target.scaleY)),t.target.set("scaleX",1),t.target.set("scaleY",1)}),i.abrupt("break",89);case 13:return a=v()({},e,{isType:"Rectangle",name:e.name?e.name:"Rectangle",rx:e.rx?e.rx:5,ry:e.ry?e.ry:5}),r=new fabric.Rect(v()({},a)),r.on("scaled",function(t){t.target.set("width",parseInt(t.target.width*t.target.scaleX)),t.target.set("height",parseInt(t.target.height*t.target.scaleY)),t.target.set("scaleX",1),t.target.set("scaleY",1)}),i.abrupt("break",89);case 17:return a=v()({},e,{isType:"Parallelogram",name:e.name?e.name:"Parallelogram",rx:0,ry:0,skewX:e.skewX?e.skewX:-45,skewY:0}),r=new fabric.Rect(v()({},a)),r.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,tl:!0,tr:!0}),i.abrupt("break",89);case 21:return a=v()({},e,{isType:"Circle",name:e.name?e.name:"Circle",rx:e.width/2,ry:e.height/2}),r=new fabric.Ellipse(v()({},a)),r.on("scaled",function(t){t.target.set("rx",parseInt(t.target.width*t.target.scaleX/2)),t.target.set("ry",parseInt(t.target.height*t.target.scaleY/2)),t.target.set("scaleX",1),t.target.set("scaleY",1)}),i.abrupt("break",89);case 25:return a=v()({},e,{isType:"EqualCircle",name:e.name?e.name:"EqualCircle",radius:e.width/2}),r=new fabric.Circle(v()({},a)),r.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,tl:!0,tr:!0}),i.abrupt("break",89);case 29:return a=v()({},e,{isType:"Dottedline",name:e.name?e.name:"Dottedline",strokeDashArray:3===e.DottedlineType?[10,4,3,4]:2===e.DottedlineType?[8,2]:[0,0],stroke:e.fill,strokeWidth:e.strokeWidth}),s=-n.xLeft+e.left,c=-n.xLeft+e.left+e.width,l=-n.yTop+e.top,h=-n.yTop+e.top,r=new fabric.Line([s,l,c,h],v()({},a)),r.setControlsVisibility({bl:!1,br:!1,mb:!0,ml:!0,mr:!0,mt:!0,mtr:!0,tl:!1,tr:!1}),r.on("scaled",function(t){t.target.set("width",parseInt(t.target.width*t.target.scaleX)),t.target.set("height",parseInt(t.target.height*t.target.scaleY)),t.target.set("scaleX",1),t.target.set("scaleY",1)}),i.abrupt("break",89);case 38:return a=v()({},e,{isType:"EqualTriangle",name:e.name?e.name:"EqualTriangle"}),r=new fabric.Triangle(v()({},a)),r.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,tl:!0,tr:!0}),i.abrupt("break",89);case 42:return i.next=44,o.createURLImage(e);case 44:return r=i.sent,i.abrupt("return",r);case 46:return i.next=48,o.createURLImage(e);case 48:return r=i.sent,r.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,tl:!0,tr:!0}),i.abrupt("return",r);case 51:return i.next=53,o.createURLImage(e);case 53:return r=i.sent,r.setControlsVisibility({bl:!0,br:!0,mb:!0,ml:!0,mr:!0,mt:!0,mtr:!0,tl:!0,tr:!0}),i.abrupt("return",r);case 56:return console.warn("equalImage",e),r=o.createEqualImageImage(e),i.abrupt("return",r);case 59:return i.next=61,o.createBarcode(e);case 61:return r=i.sent,i.abrupt("return",r);case 63:return i.next=65,o.createQrcode(e);case 65:return r=i.sent,i.abrupt("return",r);case 67:return i.next=69,n.createText(e.textdemo,e);case 69:r=i.sent;case 70:return a=v()({},e,{isType:"Time",name:e.name?e.name:"Time"}),r=new fabric.Text(e.textdemo,a),r.setControlsVisibility({bl:!0,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,tl:!0,tr:!0}),i.abrupt("break",89);case 74:return u={id:e.id,type:e.type,left:e.left,top:e.top,xLeft:e.xLeft?e.xLeft:0,xRight:e.xRight?e.xRight:0,yTop:e.yTop?e.yTop:0,yBot:e.yBot?e.yBot:0,width:e.width,height:e.height,fill:e.backgroundColor?e.backgroundColor:"rgba(0,0,0,0)",stroke:e.stroke?e.stroke:"",strokeWidth:e.strokeWidth?e.strokeWidth:null,strokeDashArray:[3,1],fontColor:e.fontColor?e.fontColor:"#000000",fontSize:e.fontSize?e.fontSize:14,fontFamily:e.fontFamily?e.fontFamily:"微软雅黑",textdemo:e.textdemo?e.textdemo:"TextRect",minScaleLimit:.2,flipX:!1,flipY:!1,lockSkewingX:!0,lockSkewingY:!0,lockScalingFlip:!0,originX:"left",originY:"top",component:"component",isType:"TextRect",isDiff:"static",name:e.name?e.name:"TextRect",hasRotatingPoint:e.hasRotatingPoint},f={id:e.id,type:e.type,left:e.left,top:e.top,xLeft:e.xLeft?e.xLeft:0,xRight:e.xRight?e.xRight:0,yTop:e.yTop?e.yTop:0,yBot:e.yBot?e.yBot:0,width:e.width,height:e.height,fill:e.fontColor?e.fontColor:"#000000",fontSize:e.fontSize?e.fontSize:14,fontColor:e.fontColor?e.fontColor:"#000000",fontFamily:e.fontFamily?e.fontFamily:"微软雅黑",textdemo:e.textdemo?e.textdemo:"TextRect",textAlign:e.textAlign?e.textAlign:"left",originX:"left",originY:"top",component:"component",isType:"TextRect-text",isDiff:"static",name:e.name?e.name:"TextRect",splitByGrapheme:!0,lockScalingFlip:!0,minScaleLimit:.2,hasRotatingPoint:e.hasRotatingPoint},r=new fabric.RectWithText(u,f,e.textdemo),i.abrupt("break",89);case 78:return d={left:500,top:500,width:300,height:130,row:3,col:3,background:"#ffff00",borderWidth:0,borderColor:"#000000",borderDashArray:[0,0],lineRowWidth:1,lineRowColor:"#666666",lineRowDashArray:[0,0],lineColWidth:1,lineColColor:"#666666",lineColDashArray:[0,0]},p={style:{height:40,fontType:"宋体",fontSize:18,fontColor:"#000000",bgColor:"#ffffff",lineHeight:40},data:[{width:200,name:"表头名称1",fileType:0,fileCode:"itemTitle"},{width:50,name:"表头名称2",fileType:0,fileCode:"itemTitle"},{width:50,name:"表头名称3",fileType:0,fileCode:"itemTitle"}]},g={style:{fontType:"宋体",fontSize:16,fontColor:"#ffffff",bgColor:"#000000",lineHeight:20},data:[]},r=new fabric.tableView(A,d,p,g),i.abrupt("break",89);case 83:return console.log("tableList",e.tableinfo.width),m={tableinfo:{left:500,top:300,row:3,col:3,width:184,height:134,titleLineHeight:52,bodyLineHeight:40,times:5,animate:0,borderWidth:1,borderColor:"#ffff00",borderType:0,bgColors:["#A4CFFC","#AACF98"]},tableList:[{type:0,col:1,width:60,height:50,fontType:"",fontSize:14,fontColor:"#000000",value:"A列",bgcolor:"#EEEEEE",position:5,field:"itemTitle",fieldType:0},{type:0,col:2,width:60,height:50,fontType:"",fontSize:16,fontColor:"#000000",value:"B列",bgcolor:"#EEEEEE",position:5,field:"itemTitle",fieldType:0},{type:0,col:3,width:60,height:50,fontType:"",fontSize:16,fontColor:"#000000",value:"C列",bgcolor:"#EEEEEE",position:5,field:"itemTitle",fieldType:0},{type:1,col:1,width:60,height:40,fontType:"",fontSize:14,fontColor:"#000000",value:"A列值",bgcolor:"#EEEEEE",position:5,field:"",fieldType:0},{type:1,col:2,width:60,height:40,fontType:"",fontSize:14,fontColor:"#000000",value:"B列值",bgcolor:"#EEEEEE",position:5,field:"",fieldType:0},{type:1,col:3,width:60,height:40,fontType:"",fontSize:12,fontColor:"#ff0000",value:"C列值",bgcolor:"#EEEEEE",position:9,field:"",fieldType:0}]},r=new fabric.tableList(A,m),setTimeout(function(){console.warn(r.table),o.setActiveObject(r.table.group),r.table.group.setCoords(),o.canvas.add(r),o.setTop()},1),i.abrupt("break",89);case 88:console.log("default");case 89:if("tableList"!==t){i.next=94;break}return n.canvas.renderAll(),i.abrupt("return",r);case 94:return r.setCoords(),n.setActiveObject(r),n.canvas.add(r),n.setTop(),n.canvas.renderAll(),i.abrupt("return",r);case 100:case"end":return i.stop()}},i,n)}))()},createoneImage:function(t){this.canvas},createURLImage:function(t){var e=this,n=this.canvas;return new h.a(function(i,A){t.src=t.src?t.src:"./static/images/img.svg",console.log(t.src);var o=new Image;o.crossOrigin="anonymous",o.src=t.src,o.onload=function(){fabric.Image.fromURL(t.src,function(A){A.crossOrigin="Anonymous",t.crossOrigin="Anonymous",A.set({id:t.id?t.id:"image",type:t.type?t.type:0,isType:"Image",component:"component",isDiff:"static",padding:0,flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0,minScaleLimit:1e-4,lockSkewingX:!0,lockSkewingY:!0,left:t.left,top:t.top,angle:t.angle?t.angle:0,name:t.name?t.name:"Image",scaleX:t.width/A.width,scaleY:t.height/A.height,width:A.width,height:A.height,stroke:t.stroke?t.stroke:"",strokeWidth:t.strokeWidth?t.strokeWidth:0,strokeDashArray:t.strokeDashArray?t.strokeDashArray:[0,0],selectable:!1!==t.selectable||t.selectable,visible:!1!==t.visible||t.visible,hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint}),A.hasControls=!0,A.hasBorders=!0,n.add(A),e.activecanvaobjs.push(A),e.activeobj=A,t&&t.registeObjectEvent&&T.a.registeObjectEvent(e,A),A.setCoords(),e.setActiveObject(A),n.renderAll.bind(n),e.setTop(),i(A)})},o.onerror=function(){t.src="./static/images/img.svg",fabric.Image.fromURL(t.src,function(A){A.set({id:t.id?t.id:"image",type:t.type?t.type:0,isType:"Image",component:"component",isDiff:"static",padding:0,flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0,minScaleLimit:1e-4,lockSkewingX:!0,lockSkewingY:!0,left:t.left,top:t.top,angle:t.angle?t.angle:0,name:t.name?t.name:"Image",scaleX:t.scaleX,scaleY:t.scaleY,width:t.width,height:t.height,stroke:t.stroke?t.stroke:"",strokeWidth:t.strokeWidth?t.strokeWidth:0,strokeDashArray:t.strokeDashArray?t.strokeDashArray:[0,0],selectable:!1!==t.selectable||t.selectable,visible:!1!==t.visible||t.visible,hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint}),A.hasControls=!0,A.hasBorders=!0,n.add(A),e.activecanvaobjs.push(A),e.activeobj=A,t&&t.registeObjectEvent&&T.a.registeObjectEvent(e,A),A.setCoords(),e.setActiveObject(A),n.renderAll.bind(n),e.setTop(),i(A)})}})},createQrcode:function(t){var e=this,n=this.canvas;return new h.a(function(i,A){var o=void 0,r=jrQrcode.getQrBase64(t.imgText,{padding:t.margin?t.margin:2,width:t.width?t.width:80,height:t.height?t.height:80,correctLevel:QRErrorCorrectLevel.H,reverse:!1,background:t.background?t.background:"#ffffff",foreground:t.lineColor?t.lineColor:"#000000"}),a=document.createElement("img");a.src=r,a.id=(new Date).getTime(),a.onload=function(){o=new fabric.Image(a,{left:t.left,top:t.top,id:t.id,type:t.type?t.type:"0",name:t.name?t.name:"Qrcode",angle:t.angle,component:"component",isType:"Qrcode",isDiff:"static",flipX:!1,flipY:!1,lockSkewingX:!0,lockSkewingY:!0,originX:"left",originY:"top",lockUniScaling:!0,imgText:t.imgText,lineColor:t.lineColor,hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint}),n.add(o),e.setActiveObject(o),e.setTop(),n.renderAll(),i(o)},a.onerror=function(){A(new Error("qrcode error load!"))}})},createBarcode:function(t){var e=this,n=this.canvas;return new h.a(function(i,A){var o=void 0;t.imgText=t.imgText?t.imgText:"barcode123456789",t.barlineWidth=t.barlineWidth?t.barlineWidth:1;var r=document.getElementById("barbox"),a=document.createElement("img"),s="barcode"+t.id;a.id="barcode"+t.id,r.childNodes.forEach(function(e){e.getAttribute("id")===s&&document.getElementById("barcode"+t.id).remove()}),r.appendChild(a),JsBarcode("#barcode"+t.id,t.imgText,{id:t.id,format:t.format?t.format:"CODE128",lineColor:t.lineColor?t.lineColor:"#000000",margin:t.margin?t.margin:0,width:t.barlineWidth,height:t.height?t.height:20,displayValue:!1}),t.originXY=t.originXY?t.originXY:["left","top"],document.getElementById(s).onload=function(){var A=new fabric.Image(document.getElementById(s),{id:t.id,width:document.getElementById(s).width,height:t.height,name:t.name?t.name:"barcodeimg",angle:t.angle,component:"component",isType:"barcodeimg",isDiff:"static",flipX:!1,flipY:!1,lockSkewingX:!0,lockSkewingY:!0,scaleX:1,scaleY:1,lockScalingX:!0,lockScalingY:!0,lockRotation:!0,imgText:t.imgText,lineColor:t.lineColor,hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint}),r=new fabric.Rect({width:t.width,height:t.height,fill:"#f1edea",originX:"center",originY:"center",left:0,top:0,name:t.name?t.name:"barcodebg",angle:t.angle,component:"component",isType:"barcodebg",isDiff:"static",hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint});o=new fabric.Group([r,A],{originX:"left",originY:"top",left:t.left,top:t.top,originXY:[t.originXY[0],"top"],id:t.id,type:t.type?t.type:"0",name:t.name?t.name:"Barcode",angle:t.angle,component:"component",isType:"Barcode",isDiff:"static",width:t.width,height:t.height,barlineWidth:t.barlineWidth,imgText:t.imgText,lineColor:t.lineColor,lockRotation:!0,flipX:!1,flipY:!1,lockSkewingX:!0,lockSkewingY:!0,hasRotatingPoint:!1!==t.hasRotatingPoint||t.hasRotatingPoint}),n.add(o);var a=0,c=t.width,l=document.getElementById(s).width;"left"===t.originXY[0]?a=c<l?Math.abs(l-c)/2:-Math.abs(l-c)/2:"center"===t.originXY[0]?a=0:"right"===t.originXY[0]&&(a=c<l?-Math.abs(l-c)/2:Math.abs(l-c)/2),o.item(0).set({left:"-50%"}),o.item(1).set({top:0,left:a}),e.setActiveObject(o),e.setTop(),n.renderAll(),e.changeBarcodeImage(o),i(o)},document.getElementById(s).onerror=function(){A(new Error("barcode error load!"))}})},changeQrcodeImage:function(t){if("Qrcode"===t.isType){var e=JSON.parse(j()(t));this.removeObj(t);var n=e.left+this.xLeft,i=e.top+this.yTop;this.createElement(t.isType,v()({},t,{imgText:t.imgText,lineColor:t.lineColor,left:n,top:i,width:parseInt(t.width*t.scaleX),height:parseInt(t.height*t.scaleY),scaleX:1,scaleY:1}))}},changeBarcodeImage:function(t){var e=this;return x()(b.a.mark(function n(){var i,A,o,r,a,s;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.barlineWidth,i=parseInt(t.barlineWidth*(t.width*t.scaleX/(t.item(1).width*t.item(1).scaleX))),0===i&&(i=1),t.set({width:t.width*t.scaleX,scaleX:1,barlineWidth:i}),t.item(0).set({width:t.width*t.scaleX,scaleX:1}),A={id:t.id?t.id:0,format:t.item(1).format?t.item(1).format:"CODE128",lineColor:t.lineColor?t.lineColor:"#000000",margin:0,lineWidth:i,height:t.item(1).height?t.item(1).height:20},n.next=8,e.drawbarcode(t.imgText,A);case 8:o=n.sent,r=0,a=t.width,s=document.getElementById("barcode"+A.id).width,"left"===t.originXY[0]?r=a<s?Math.abs(s-a)/2:-Math.abs(s-a)/2:"center"===t.originXY[0]?r=0:"right"===t.originXY[0]&&(r=a<s?-Math.abs(s-a)/2:Math.abs(s-a)/2),t.item(1)._element.src=o,t.item(1).set({left:r,width:t.item(1)._element.width,scaleX:1}),e.setZoom(e.canvasZoom),e.canvas.requestRenderAll(),e.canvas.renderAll();case 18:case"end":return n.stop()}},n,e)}))()},createEqualImageImage:function(t){console.log("00000000000000000000");var e=this,n=this.canvas;return new h.a(function(i,A){t.url=t.url?t.url:"./static/images/img.svg";var o=document.createElement("img");o.crossOrigin="Anonymous",o.src=t.url,o.onload=function(){var A=0,r=0;o.width/o.height>t.width/t.height?(A=t.width,r=t.width/(o.width/o.height)):(r=t.height,A=t.height*(o.width/o.height));var a=new fabric.Image(o,{id:t.id?t.id:"image",isType:"equalImage-img",padding:0,flipX:!1,flipY:!1,stopContextMenu:!0,minScaleLimit:1e-4,lockSkewingX:!0,lockSkewingY:!0,originX:"center",originY:"center",scaleX:A/o.width,scaleY:r/o.height,angle:t.angle?t.angle:0,name:t.name?t.name:"Image",stroke:t.stroke?t.stroke:"",strokeWidth:t.strokeWidth?t.strokeWidth:0,strokeDashArray:t.strokeDashArray?t.strokeDashArray:[0,0],selectable:!1!==t.selectable||t.selectable,visible:!1!==t.visible||t.visible});a.hasControls=!0,a.hasBorders=!0;var s=new fabric.Rect({isType:"equalImage-bg",padding:0,originX:"center",originY:"center",width:t.width?t.width:100,height:t.height?t.height:100,fill:t.background?t.background:"#eeeeee"}),c=new fabric.Group([s,a],{isType:"equalImage",left:t.left,top:t.top,width:t.width,height:t.height,originX:"left",originY:"top",padding:0,id:t.id,hasRotatingPoint:!1,lockScalingFlip:!0,minScaleLimit:.2});c.on("scaling",function(t){var e=0,i=0;o.width/o.height>c.width*c.scaleX/(c.height*c.scaleY)?(e=c.width*c.scaleX,i=c.width*c.scaleX/(o.width/o.height),c.item(1).set("scaleX",e/o.width/c.scaleX),c.item(1).set("scaleY",i/o.height/c.scaleY)):(i=c.height*c.scaleY,e=c.height*c.scaleY*(o.width/o.height),c.item(1).set("scaleX",e/o.width/c.scaleX),c.item(1).set("scaleY",i/o.height/c.scaleY)),n.requestRenderAll(),n.renderAll()}),c.setControlsVisibility({bl:!0,br:!0,mb:!0,ml:!0,mr:!0,mt:!0,mtr:!1,tl:!0,tr:!0}),n.add(c),t&&t.registeObjectEvent&&T.a.registeObjectEvent(e,o),c.setCoords(),e.setActiveObject(c),n.renderAll.bind(n),i(c)}})},renderCanvas:function(){this.canvas.requestRenderAll(),this.canvas.renderAll(),this.setTop()},todata:function(){var t=this;return x()(b.a.mark(function e(){var n,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.discardActive(),n=canvas.toDataURL({format:"jpeg",multiplier:2}),e.next=4,t.cutImg(n,-t.xLeft,-t.yTop,-t.xLeft+t.width,-t.yTop+t.height);case 4:i=e.sent,t.$emit("previewshow",i);case 6:case"end":return e.stop()}},e,t)}))()},cutImg:function(t,e,n,i,A){return e*=this.canvasZoom,n*=this.canvasZoom,i*=this.canvasZoom,A*=this.canvasZoom,new h.a(function(o,r){var a=i-e,s=A-n,c=canvas.getContext("2d"),l=new Image;l.src=t;var h=document.createElement("canvas"),u=h.getContext("2d");l.onload=function(){c.drawImage(l,0,0,canvas.width,canvas.height);var t=c.getImageData(e,n,a,s);h.width=a,h.height=s,u.putImageData(t,0,0,0,0,h.width,h.height);var i=h.toDataURL("image/png");o(i)},l.onerror=function(){r(new Error("Could not load image at "))}})},getFontImgdata:function(t,e,n,i,A){return new h.a(function(o,r){var s=new fabric.Canvas("fontcanvas",{preserveObjectStacking:!0}),l=new fabric.Text(t,{fill:"#ff0",splitByGrapheme:!0,lockScalingFlip:!0,fontFamily:e,fontSize:n,originX:"left",originY:"top",scaleX:i,scaleY:A});s.setWidth(l.width*i),s.setHeight(l.height*A),s.backgroundColor="#000",l.set({left:0,top:0}),l.setCoords(),s.add(l),s.requestRenderAll(),s.renderAll();for(var h=s.getContext("2d"),u=h.getImageData(0,0,l.width*i,l.height*A).data,f=h.getImageData(0,0,l.width*i,l.height*A).width,d=h.getImageData(0,0,l.width*i,l.height*A).height,v=[],p=[],g=[],m=0;m<2;m++)v[m]=[];for(var b=[],y=0,x=u.length;y<x;y+=4){var w=u[y],j=u[y+1],k=u[y+2];u[y+3];w+" "+j+" "+k=="0 0 0"?b.push(0):b.push(1)}for(var T=[],E=0;E<b.length;E+=f){T[E/f]=[];for(var C=0;C<f;C++)T[E/f][C]=b[E+C],1===b[E+C]&&(g.push(parseInt(E/f)),p.push(C))}var _=s.toDataURL({format:"jpeg",multiplier:1}),O=new c.a(p),R=a()(O),I=R.sort(function(t,e){return t-e}),L=I[I.length-1]-I[0]+1,S=new c.a(g),X=a()(S),Y=X.sort(function(t,e){return t-e}),P=Y[Y.length-1]-Y[0]+1,B={offset:[I[0]-0,f-I[I.length-1]-1,Y[0]-0,d-Y[Y.length-1]-1],fontwidth:L,fontheight:P,fontSize:n,width:f,height:d,url:_,lines:T},D=new Image;D.src=_,D.onload=function(){o(B)}})},createRect:function(t){t=g()({width:50,height:30,left:-this.xLeft,top:-this.yTop,padding:0,angle:0,scaleX:1,scaleY:1},t);var e=new fabric.Rect(v()({},t,{left:-this.xLeft+t.left,top:-this.yTop+t.top,id:t.id,name:t.name?t.name:"Rect",component:"component",isType:"Rect",isDiff:"static",selectable:!1!==t.selectable||t.selectable,visible:!1!==t.visible||t.visible,fill:t.fill?t.fill:"#000",fillColor:t.fillColor?t.fillColor:"#000",backgroundColor:t.backgroundColor?t.backgroundColor:"#000000",stroke:t.stroke?t.stroke:"rgba(0,0,0,0)",strokeWidth:t.strokeWidth?t.strokeWidth:0,strokeDashArray:t.strokeDashArray?t.strokeDashArray:[0,0],minScaleLimit:1e-4,flipX:!1,flipY:!1,originX:"left",originY:"top",stopContextMenu:!0}));return e.setCoords(),this.canvas.add(e),this.setTop(),this.canvas.renderAll(),e},createText:function(t,e){e=g()({width:50,height:30,left:-this.xLeft,top:-this.yTop,padding:0,angle:0,scaleX:1,scaleY:1},e);var n=new fabric.Textbox(t,v()({},e,{splitByGrapheme:!0,width:e.width,height:e.height,left:e.left,top:e.top,id:e.id,name:e.name?e.name:"Text",component:"component",isType:"Text",isDiff:"static",textAlign:"left",selectable:!1!==e.selectable||e.selectable,visible:!1!==e.visible||e.visible,fill:e.fill?e.fill:"#000",fillColor:e.fillColor?e.fillColor:"#000",backgroundColor:e.backgroundColor?e.backgroundColor:"rgba(0,0,0,0)",stroke:e.stroke?e.stroke:"rgba(0,0,0,0)",strokeWidth:e.strokeWidth?e.strokeWidth:0,strokeDashArray:e.strokeDashArray?e.strokeDashArray:[0,0],minScaleLimit:1e-4,flipX:!1,flipY:!1,originX:"left",originY:"top",lockSkewingX:!0,lockSkewingY:!0,stopContextMenu:!0}));return n.setCoords(),this.canvas.add(n),this.setTop(),this.canvas.renderAll(),n},createText2:function(t,e){e=g()({width:50,height:30,left:-this.xLeft,top:-this.yTop,padding:0,angle:0,scaleX:1,scaleY:1},e);var n=new fabric.Text(t,v()({},e,{left:-this.xLeft+e.left,top:-this.yTop+e.top,id:e.id,name:e.name?e.name:"Time",component:"component",isType:"Time",isDiff:"static",textAlign:"left",selectable:!1!==e.selectable||e.selectable,visible:!1!==e.visible||e.visible,fill:e.fill?e.fill:"#000",fillColor:e.fillColor?e.fillColor:"#000",backgroundColor:e.backgroundColor?e.backgroundColor:"rgba(0,0,0,0)",stroke:e.stroke?e.stroke:"rgba(0,0,0,0)",strokeWidth:e.strokeWidth?e.strokeWidth:0,strokeDashArray:e.strokeDashArray?e.strokeDashArray:[0,0],minScaleLimit:1e-4,flipX:!1,flipY:!1,originX:"left",originY:"top",lockSkewingX:!0,lockSkewingY:!0,stopContextMenu:!0}));return n.setCoords(),this.canvas.add(n),this.setTop(),this.canvas.renderAll(),n},returnXY:function(){return{x:this.xLeft,y:this.yTop}},setCompunentsNoselect:function(){var t=this.getObjects();for(var e in t)"component"===t[e].component&&(t[e].set("selectable",!1),this.canvas.requestRenderAll(),this.canvas.renderAll())},setCompunentsCanselect:function(){var t=this.getObjects();for(var e in t)"component"===t[e].component&&!1!==t[e].visible&&(t[e].set("selectable",!0),this.canvas.requestRenderAll(),this.canvas.renderAll())},getObjectsNew:function(){var t=this.getObjects(),e=[];for(var n in t)"component"===t[n].component&&e.push(t[n]);return e},clipText:function(t){this.setActiveObject(t),this.canvas.requestRenderAll(),this.canvas.renderAll()},setCursor:function(t){fabric.Canvas.prototype.defaultCursor=1==t?"url('data:image/ico;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////EPPz80y5ubmxx8fHif///x7///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/gTz8/NgdXV16Wpqav9zc3P5srKyqff39x4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8E9fX1RIiIiN1zc3P/YWFh/7S0tP9tbW3/w8PDnf///wwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////BObm5kyPj4/PkZGR//Hx8f/Jycn/ampq/5GRkf+Hh4fh////NgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wT///9AiYmJ2YuLi//8/Pz///////////+7u7v/Hh4e/8HBwbX///8OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8E5OTkTIuLi9OVlZX/9PT0///////+/v7/5OTk/3h4ePusrKzJ+Pj4SgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////BP///0CLi4vTiIiI//n5+f///////////+zs7P9zc3P/p6entf///yr+/v4CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wTm5uZMiYmJ2ZWVlf/5+fn//v7+//7+/v/h4eH/dXV1+6+vr6v4+Pgk////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+/v4E9fX1RI+Pj8+Li4v/9PT0///////+/v7/8PDw/3Jycv2kpKS3////Kv///wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////BO7u7kaIiIjdkZGR//z8/P///////////+Hh4f9ycnL9s7Ozqf///yYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/gLq6upKkJCQzY+Pj//y8vL///////7+/v/s7Oz/dXV1+6SkpLf///8m////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8E/v7+QIiIiN2NjY3//Pz8////////////5OTk/3Nzc/+vr6+r////KgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////BOTk5EyNjY3Pk5OT//Pz8////////v7+/+bm5v94eHj7p6entfj4+CT///8CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///84ioqK1YiIiP/8/Pz////////////p6en/dHR0/6mpqbH///8q////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/hbIyMiLtbW10eDg4FYAAAAA/f39IqSkpNVUVFT/tra2//7+/v/+/v7/4uLi/3d3d/usrKyv9fX1Jv7+/gIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3d3dXnZ2dvOAgID/q6urzf///xT8/Pw8cHBw/7CwsP92dnb/sLCw/+3t7f9xcXH/pqamt////yr+/v4CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADW1tZ4b29v/7Gxsf+hoaHn////JMPDw614eHj/9vb2//X19f9tbW3/MjIy/bm5ubf///8kAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANbW1nhvb2//sbGx/6Ghoef+/v5UkJCQ57Ozs//IyMj/aGho/19fX/2mpqbX////Tv///wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1tbWeG9vb/+xsbH/oaGh5/7+/l6IiIjrgoKC/3t7e/PY2Nit+vr6ev///xgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADW1tZ4b29v/7Gxsf+hoaHn////JtPT02LKysqV6OjoPv///w7///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+/gL///8a////Gv///xr///8a////GtbW1nhvb2//sbGx/6Ghoef///8s////Gv///xr///8a////Gv7+/hAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8YyMjIiaSkpOekpKTnpKSk56SkpOekpKTno6Oj72lpaf+0tLT/ioqK/aSkpOekpKTnpKSk56SkpOekpKTnra2tzeDg4FYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///0xpaWnzra2t/62trf+tra3/ra2t/62trf+tra3/vLy8/+bm5v+ysrL/ra2t/62trf+tra3/ra2t/62trf9+fn7/tbW10QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/v7+LJeXl8VsbGz/bGxs/2xsbP9sbGz/bGxs/2tra/9nZ2f/vr6+/2ZmZv9sbGz/bGxs/2xsbP9sbGz/bGxs/3R0dPPIyMiLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8G9/f3LNra2nLa2tpy2tractra2nLa2tpy0NDQpW9vb/+xsbH/oqKi79vb23ba2tpy2tractra2nLa2tpy4eHhWv7+/hYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADW1tZ4b29v/7Gxsf+hoaHn////IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANbW1nhvb2//sbGx/6Ghoef///8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1tbWeG9vb/+xsbH/oaGh5////yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADW1tZ4b29v/7Gxsf+hoaHn////IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANbW1nhvb2//sbGx/6Ghoef///8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9vb2LJeXl8VpaWnzx8fHif///wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8G/v7+LP///0z///8YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////5////8P///+B////Af///gH///wD///4B///8A///+Af///AP///gH///wD///4B///8A///OAf//xgP//8QH///ED///xD///8b////H///gAB//4AAP/+AAD///h////8f////H////x////8f////H////x////////8=') ,auto":"default"},getZoom:function(){return this.canvas.getZoom()},judeisTableHeadorBody:function(t){var e=t.target._objects,n=0,i=0;return e.forEach(function(e){e.left+t.target.width/2<t.pointer.x-t.target.left&&t.pointer.x-t.target.left<e.left+t.target.width/2+e.width&&(n=e.no),e.top+t.target.height/2<t.pointer.y-t.target.top&&t.pointer.y-t.target.top<e.top+t.target.height/2+e.height&&(i=e.nrow)}),{row:i,col:n}},setTableHeadData:function(t,e,n,i){t.tableHead.data[n-1].name=i,t._objects.forEach(function(t){"table-theadtext"===t.isType&&t.nrow===e&&t.no===n&&t.set("text",i)}),this.canvas.requestRenderAll(),this.canvas.renderAll()},setTableHeadStyle:function(t,e){var n=this;t.tableHead.style=v()({},t.tableHead.style,e),t._objects.forEach(function(t){"table-theadbg"===t.isType&&t.set("fill",e.bgColor),"table-theadtext"===t.isType&&(t.set("fontSize",e.fontSize),t.set("fill",e.fontColor),t.set("fontType",e.fontType),t.set("lineHeight",e.lineHeight)),n.canvas.requestRenderAll(),n.canvas.renderAll()})},setTableBodyStyle:function(t,e){var n=this;t.tableBody.style=v()({},t.tableBody.style,e),t._objects.forEach(function(t){"table-tbodybg"===t.isType&&t.set("fill",e.bgColor),"table-tbodytext"===t.isType&&(t.set("fontSize",e.fontSize),t.set("fill",e.fontColor),t.set("fontType",e.fontType),t.set("lineHeight",e.lineHeight)),n.canvas.requestRenderAll(),n.canvas.renderAll()})},setTableHeadHeight:function(t,e){if(e){var n=this.canvas,i=t.item(0).tableStyle,A=t.item(0).tableHead,o=t.item(0).tableBody;t.tableHead.style.height=e,A.style.height=e,n.remove(t),new fabric.tableView(n,i,A,o),n.requestRenderAll(),n.renderAll()}}},o()(i,"setTableHeadHeight",function(t,e,n){if(n&&n){var i=this.canvas,A=t.item(0).tableStyle,o=t.item(0).tableHead,r=t.item(0).tableBody;t.tableHead.style.height=height,o.style.height=height,i.remove(t),new fabric.tableView(i,A,o,r),i.requestRenderAll(),i.renderAll()}}),o()(i,"setNewTable",function(t,e){e||(e=t.item(0).tableStyle);var n=this.canvas;n.remove(t);var i=new fabric.tableList(this.canvas,e),A=this;setTimeout(function(){A.setActiveObject(i.table.group),i.table.group.setCoords(),A.canvas.add(i),A.setTop()},1),n.requestRenderAll(),n.renderAll()}),i)}},function(t,e,n){t.exports={default:n(67),__esModule:!0}},function(t,e,n){t.exports={default:n(71),__esModule:!0}},function(t,e,n){var i=n(9),A=n(75),o=n(41),r=n(29)("IE_PROTO"),a=function(){},s=function(){var t,e=n(20)("iframe"),i=o.length;for(e.style.display="none",n(42).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;i--;)delete s.prototype[o[i]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[r]=t):n=s(),void 0===e?n:A(n,e)}},function(t,e,n){var i=n(76),A=n(41);t.exports=Object.keys||function(t){return i(t,A)}},function(t,e,n){var i=n(1),A=n(0),o=A["__core-js_shared__"]||(A["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(26)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(0).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(9);t.exports=function(t,e,n,A){try{return A?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(13),A=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[A]===t)}},function(t,e,n){var i=n(31),A=n(2)("iterator"),o=n(13);t.exports=n(1).getIteratorMethod=function(t){if(void 0!=t)return t[A]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(2)("iterator"),A=!1;try{var o=[7][i]();o.return=function(){A=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!A)return!1;var n=!1;try{var o=[7],r=o[i]();r.next=function(){return{done:n=!0}},o[i]=function(){return r},t(o)}catch(t){}return n}},function(t,e){},function(t,e,n){n(84);for(var i=n(0),A=n(8),o=n(13),r=n(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<a.length;s++){var c=a[s],l=i[c],h=l&&l.prototype;h&&!h[r]&&A(h,r,c),o[c]=o.Array}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(0),A=n(1),o=n(4),r=n(6),a=n(2)("species");t.exports=function(t){var e="function"==typeof A[t]?A[t]:i[t];r&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(30)("meta"),A=n(5),o=n(12),r=n(4).f,a=0,s=Object.isExtensible||function(){return!0},c=!n(11)(function(){return s(Object.preventExtensions({}))}),l=function(t){r(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!A(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!s(t))return"F";if(!e)return"E";l(t)}return t[i].i},u=function(t,e){if(!o(t,i)){if(!s(t))return!0;if(!e)return!1;l(t)}return t[i].w},f=function(t){return c&&d.NEED&&s(t)&&!o(t,i)&&l(t),t},d=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:u,onFreeze:f}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){t.exports={default:n(100),__esModule:!0}},function(t,e,n){var i=n(9),A=n(10),o=n(2)("species");t.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||void 0==(n=i(r)[o])?e:A(n)}},function(t,e,n){var i,A,o,r=n(7),a=n(102),s=n(42),c=n(20),l=n(0),h=l.process,u=l.setImmediate,f=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,p=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};u&&f||(u=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++p]=function(){a("function"==typeof t?t:Function(t),e)},i(p),p},f=function(t){delete g[t]},"process"==n(14)(h)?i=function(t){h.nextTick(r(m,t,1))}:v&&v.now?i=function(t){v.now(r(m,t,1))}:d?(A=new d,o=A.port2,A.port1.onmessage=b,i=r(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(t){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(r(m,t,1),0)}),t.exports={set:u,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(9),A=n(5),o=n(34);t.exports=function(t,e){if(i(t),A(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){t.exports={default:n(109),__esModule:!0}},function(t,e,n){"use strict";var i=n(127);e.a={name:"contextmenu",components:{Tree:i.a},data:function(){return{floatDirection:"float-statue-1"}},props:{contextMenuData:{type:Object,requred:!1,default:function(){return{menuName:null,axis:{x:null,y:null},menulists:[{fnHandler:"",icoName:"",btnName:""}]}}},transferIndex:{type:Number,default:0}},watch:{"contextMenuData.axis":function(t){var e=t.x,n=t.y,i=window.innerWidth,A=window.innerHeight,o=this,r=o.transferIndex,a="vue-contextmenuName-"+o.contextMenuData.menuName,s=document.getElementsByClassName(a)[r];s.style.display="block";var c=30*this.contextMenuData.menulists.length;s.style.top=(n+c>A?A-c:n)+"px",s.style.left=(e+150>i?i-150:e)+"px",document.addEventListener("mouseup",function(t){0!==t.button&&2!==t.button||(s.style.display="none")},!1),e+300>i&&n+2*c>A&&(this.floatDirection="float-status-4"),e+300<i&&n+2*c>A&&(this.floatDirection="float-status-1"),e+300>i&&n+2*c<A&&(this.floatDirection="float-status-3"),e+300<i&&n+2*c<A&&(this.floatDirection="float-status-2")}},methods:{fnHandler:function(t){this.$emit(t.fnHandler)}}}},function(t,e,n){"use strict";e.a={name:"tree-child-component",props:["itemchildren","float"],methods:{fnHandler:function(t){this.$emit("childhandler",t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(62);n.d(e,"FabricCanvas",function(){return i.a})},function(t,e,n){"use strict";var i=n(63),A={install:function(t){t.component(i.a.name,i.a)}};e.a=A},function(t,e,n){"use strict";function i(t){n(64),n(65)}var A=n(35),o=n(131),r=n(19),a=i,s=r(A.a,o.a,!1,a,"data-v-85acc034",null);e.a=s.exports},function(t,e){},function(t,e){},function(t,e,n){"use strict";e.__esModule=!0;var i=n(36),A=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,n){return e in t?(0,A.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){n(68);var i=n(1).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(3);i(i.S+i.F*!n(6),"Object",{defineProperty:n(4).f})},function(t,e,n){t.exports=!n(6)&&!n(11)(function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,A;if(e&&"function"==typeof(n=t.toString)&&!i(A=n.call(t)))return A;if("function"==typeof(n=t.valueOf)&&!i(A=n.call(t)))return A;if(!e&&"function"==typeof(n=t.toString)&&!i(A=n.call(t)))return A;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){n(22),n(80),t.exports=n(1).Array.from},function(t,e,n){var i=n(23),A=n(24);t.exports=function(t){return function(e,n){var o,r,a=String(A(e)),s=i(n),c=a.length;return s<0||s>=c?t?"":void 0:(o=a.charCodeAt(s),o<55296||o>56319||s+1===c||(r=a.charCodeAt(s+1))<56320||r>57343?t?a.charAt(s):o:t?a.slice(s,s+2):r-56320+(o-55296<<10)+65536)}}},function(t,e,n){t.exports=n(8)},function(t,e,n){"use strict";var i=n(38),A=n(21),o=n(17),r={};n(8)(r,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(r,{next:A(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(4),A=n(9),o=n(39);t.exports=n(6)?Object.defineProperties:function(t,e){A(t);for(var n,r=o(e),a=r.length,s=0;a>s;)i.f(t,n=r[s++],e[n]);return t}},function(t,e,n){var i=n(12),A=n(27),o=n(77)(!1),r=n(29)("IE_PROTO");t.exports=function(t,e){var n,a=A(t),s=0,c=[];for(n in a)n!=r&&i(a,n)&&c.push(n);for(;e.length>s;)i(a,n=e[s++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(27),A=n(16),o=n(78);t.exports=function(t){return function(e,n,r){var a,s=i(e),c=A(s.length),l=o(r,c);if(t&&n!=n){for(;c>l;)if((a=s[l++])!=a)return!0}else for(;c>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(23),A=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?A(t+e,0):o(t,e)}},function(t,e,n){var i=n(12),A=n(18),o=n(29)("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=A(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},function(t,e,n){"use strict";var i=n(7),A=n(3),o=n(18),r=n(43),a=n(44),s=n(16),c=n(81),l=n(45);A(A.S+A.F*!n(46)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,A,h,u=o(t),f="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,p=void 0!==v,g=0,m=l(u);if(p&&(v=i(v,d>2?arguments[2]:void 0,2)),void 0==m||f==Array&&a(m))for(e=s(u.length),n=new f(e);e>g;g++)c(n,g,p?v(u[g],g):u[g]);else for(h=m.call(u),n=new f;!(A=h.next()).done;g++)c(n,g,p?r(h,v,[A.value,g],!0):A.value);return n.length=g,n}})},function(t,e,n){"use strict";var i=n(4),A=n(21);t.exports=function(t,e,n){e in t?i.f(t,e,A(0,n)):t[e]=n}},function(t,e,n){t.exports={default:n(83),__esModule:!0}},function(t,e,n){n(47),n(22),n(48),n(86),n(93),n(96),n(98),t.exports=n(1).Set},function(t,e,n){"use strict";var i=n(85),A=n(49),o=n(13),r=n(27);t.exports=n(25)(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,A(1)):"keys"==e?A(0,n):"values"==e?A(0,t[n]):A(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var i=n(87),A=n(52);t.exports=n(88)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(A(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i=n(4).f,A=n(38),o=n(32),r=n(7),a=n(33),s=n(15),c=n(25),l=n(49),h=n(50),u=n(6),f=n(51).fastKey,d=n(52),v=u?"_s":"size",p=function(t,e){var n,i=f(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,i){a(t,l,e,"_i"),t._t=e,t._i=A(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=i&&s(i,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),i=p(n,t);if(i){var A=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=A),A&&(A.p=o),n._f==i&&(n._f=A),n._l==i&&(n._l=o),n[v]--}return!!i},forEach:function(t){d(this,e);for(var n,i=r(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!p(d(this,e),t)}}),u&&i(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var i,A,o=p(t,e);return o?o.v=n:(t._l=o={i:A=f(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[v]++,"F"!==A&&(t._i[A]=o)),t},getEntry:p,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var i=n(0),A=n(3),o=n(51),r=n(11),a=n(8),s=n(32),c=n(15),l=n(33),h=n(5),u=n(17),f=n(4).f,d=n(89)(0),v=n(6);t.exports=function(t,e,n,p,g,m){var b=i[t],y=b,x=g?"set":"add",w=y&&y.prototype,j={};return v&&"function"==typeof y&&(m||w.forEach&&!r(function(){(new y).entries().next()}))?(y=e(function(e,n){l(e,y,t,"_c"),e._c=new b,void 0!=n&&c(n,g,e[x],e)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!m||"clear"!=t)&&a(y.prototype,t,function(n,i){if(l(this,y,t),!e&&m&&!h(n))return"get"==t&&void 0;var A=this._c[t](0===n?0:n,i);return e?this:A})}),m||f(y.prototype,"size",{get:function(){return this._c.size}})):(y=p.getConstructor(e,t,g,x),s(y.prototype,n),o.NEED=!0),u(y,t),j[t]=y,A(A.G+A.W+A.F,j),m||p.setStrong(y,t,g),y}},function(t,e,n){var i=n(7),A=n(28),o=n(18),r=n(16),a=n(90);t.exports=function(t,e){var n=1==t,s=2==t,c=3==t,l=4==t,h=6==t,u=5==t||h,f=e||a;return function(e,a,d){for(var v,p,g=o(e),m=A(g),b=i(a,d,3),y=r(m.length),x=0,w=n?f(e,y):s?f(e,0):void 0;y>x;x++)if((u||x in m)&&(v=m[x],p=b(v,x,g),t))if(n)w[x]=p;else if(p)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(l)return!1;return h?-1:c||l?l:w}}},function(t,e,n){var i=n(91);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(5),A=n(92),o=n(2)("species");t.exports=function(t){var e;return A(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!A(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(14);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(3);i(i.P+i.R,"Set",{toJSON:n(94)("Set")})},function(t,e,n){var i=n(31),A=n(95);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return A(this)}}},function(t,e,n){var i=n(15);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){n(97)("Set")},function(t,e,n){"use strict";var i=n(3);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(99)("Set")},function(t,e,n){"use strict";var i=n(3),A=n(10),o=n(7),r=n(15);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,a,s=arguments[1];return A(this),e=void 0!==s,e&&A(s),void 0==t?new this:(n=[],e?(i=0,a=o(s,arguments[2],2),r(t,!1,function(t){n.push(a(t,i++))})):r(t,!1,n.push,n),new this(n))}})}},function(t,e,n){n(47),n(22),n(48),n(101),n(105),n(106),t.exports=n(1).Promise},function(t,e,n){"use strict";var i,A,o,r,a=n(26),s=n(0),c=n(7),l=n(31),h=n(3),u=n(5),f=n(10),d=n(33),v=n(15),p=n(54),g=n(55).set,m=n(103)(),b=n(34),y=n(56),x=n(104),w=n(57),j=s.TypeError,k=s.process,T=k&&k.versions,E=T&&T.v8||"",C=s.Promise,_="process"==l(k),O=function(){},R=A=b.f,I=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(O,O)};return(_||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==E.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e},S=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,A=1==t._s,o=0;n.length>o;)!function(e){var n,o,r,a=A?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{a?(A||(2==t._h&&P(t),t._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&(l.exit(),r=!0)),n===e.promise?c(j("Promise-chain cycle")):(o=L(n))?o.call(n,s,c):s(n)):c(i)}catch(t){l&&!r&&l.exit(),c(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&X(t)})}},X=function(t){g.call(s,function(){var e,n,i,A=t._v,o=Y(t);if(o&&(e=y(function(){_?k.emit("unhandledRejection",A,t):(n=s.onunhandledrejection)?n({promise:t,reason:A}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",A)}),t._h=_||Y(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},Y=function(t){return 1!==t._h&&0===(t._a||t._c).length},P=function(t){g.call(s,function(){var e;_?k.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),S(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw j("Promise can't be resolved itself");(e=L(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,c(D,i,1),c(B,i,1))}catch(t){B.call(i,t)}}):(n._v=t,n._s=1,S(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};I||(C=function(t){d(this,C,"Promise","_h"),f(t),i.call(this);try{t(c(D,this,1),c(B,this,1))}catch(t){B.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(32)(C.prototype,{then:function(t,e){var n=R(p(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=_?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&S(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(D,t,1),this.reject=c(B,t,1)},b.f=R=function(t){return t===C||t===r?new o(t):A(t)}),h(h.G+h.W+h.F*!I,{Promise:C}),n(17)(C,"Promise"),n(50)("Promise"),r=n(1).Promise,h(h.S+h.F*!I,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!I),"Promise",{resolve:function(t){return w(a&&this===r?C:this,t)}}),h(h.S+h.F*!(I&&n(46)(function(t){C.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=R(e),i=n.resolve,A=n.reject,o=y(function(){var n=[],o=0,r=1;v(t,!1,function(t){var a=o++,s=!1;n.push(void 0),r++,e.resolve(t).then(function(t){s||(s=!0,n[a]=t,--r||i(n))},A)}),--r||i(n)});return o.e&&A(o.v),n.promise},race:function(t){var e=this,n=R(e),i=n.reject,A=y(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return A.e&&i(A.v),n.promise}})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(0),A=n(55).set,o=i.MutationObserver||i.WebKitMutationObserver,r=i.process,a=i.Promise,s="process"==n(14)(r);t.exports=function(){var t,e,n,c=function(){var i,A;for(s&&(i=r.domain)&&i.exit();t;){A=t.fn,t=t.next;try{A()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(s)n=function(){r.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(c)}}else n=function(){A.call(i,c)};else{var h=!0,u=document.createTextNode("");new o(c).observe(u,{characterData:!0}),n=function(){u.data=h=!h}}return function(i){var A={fn:i,next:void 0};e&&(e.next=A),t||(t=A,n()),e=A}}},function(t,e,n){var i=n(0),A=i.navigator;t.exports=A&&A.userAgent||""},function(t,e,n){"use strict";var i=n(3),A=n(1),o=n(0),r=n(54),a=n(57);i(i.P+i.R,"Promise",{finally:function(t){var e=r(this,A.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(3),A=n(34),o=n(56);i(i.S,"Promise",{try:function(t){var e=A.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";e.__esModule=!0;var i=n(37),A=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,A.default)(t)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(58),A=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=A.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){n(110),t.exports=n(1).Object.assign},function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(111)})},function(t,e,n){"use strict";var i=n(6),A=n(39),o=n(112),r=n(113),a=n(18),s=n(28),c=Object.assign;t.exports=!c||n(11)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){for(var n=a(t),c=arguments.length,l=1,h=o.f,u=r.f;c>l;)for(var f,d=s(arguments[l++]),v=h?A(d).concat(h(d)):A(d),p=v.length,g=0;p>g;)f=v[g++],i&&!u.call(d,f)||(n[f]=d[f]);return n}:c},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports=n(115)},function(t,e,n){var i=function(){return this}()||Function("return this")(),A=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=A&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(116),A)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var o=e&&e.prototype instanceof A?e:A,r=Object.create(o.prototype),a=new f(i||[]);return r._invoke=c(t,n,a),r}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function A(){}function o(){}function r(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t){function e(n,A,o,r){var a=i(t[n],t,A);if("throw"!==a.type){var s=a.arg,c=s.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,r)},function(t){e("throw",t,o,r)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},r)}r(a.arg)}function n(t,n){function i(){return new Promise(function(i,A){e(t,n,i,A)})}return A=A?A.then(i,i):i()}var A;this._invoke=n}function c(t,e,n){var A=T;return function(o,r){if(A===C)throw new Error("Generator is already running");if(A===_){if("throw"===o)throw r;return v()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=l(a,n);if(s){if(s===O)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(A===T)throw A=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);A=C;var c=i(t,e,n);if("normal"===c.type){if(A=n.done?_:E,c.arg===O)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(A=_,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===p){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=p,l(t,e),"throw"===e.method))return O;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var A=i(n,t.iterator,e.arg);if("throw"===A.type)return e.method="throw",e.arg=A.arg,e.delegate=null,O;var o=A.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=p),e.delegate=null,O):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function u(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=p,e.done=!0,e};return i.next=i}}return{next:v}}function v(){return{value:p,done:!0}}var p,g=Object.prototype,m=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},y=b.iterator||"@@iterator",x=b.asyncIterator||"@@asyncIterator",w=b.toStringTag||"@@toStringTag",j="object"==typeof t,k=e.regeneratorRuntime;if(k)return void(j&&(t.exports=k));k=e.regeneratorRuntime=j?t.exports:{},k.wrap=n;var T="suspendedStart",E="suspendedYield",C="executing",_="completed",O={},R={};R[y]=function(){return this};var I=Object.getPrototypeOf,L=I&&I(I(d([])));L&&L!==g&&m.call(L,y)&&(R=L);var S=r.prototype=A.prototype=Object.create(R);o.prototype=S.constructor=r,r.constructor=o,r[w]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},k.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(S),t},k.awrap=function(t){return{__await:t}},a(s.prototype),s.prototype[x]=function(){return this},k.AsyncIterator=s,k.async=function(t,e,i,A){var o=new s(n(t,e,i,A));return k.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(S),S[w]="Generator",S[y]=function(){return this},S.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},k.values=d,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(u),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=p),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var A=this.tryEntries[i],o=A.completion;if("root"===A.tryLoc)return e("end");if(A.tryLoc<=this.prev){var r=m.call(A,"catchLoc"),a=m.call(A,"finallyLoc");if(r&&a){if(this.prev<A.catchLoc)return e(A.catchLoc,!0);if(this.prev<A.finallyLoc)return e(A.finallyLoc)}else if(r){if(this.prev<A.catchLoc)return e(A.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<A.finallyLoc)return e(A.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var A=i;break}}A&&("break"===t||"continue"===t)&&A.tryLoc<=e&&e<=A.finallyLoc&&(A=null);var o=A?A.completion:{};return o.type=t,o.arg=e,A?(this.method="next",this.next=A.finallyLoc,O):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),O},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),u(n),O}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var A=i.arg;u(n)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=p),O}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";e.__esModule=!0;var i=n(53),A=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new A.default(function(t,n){function i(o,r){try{var a=e[o](r),s=a.value}catch(t){return void n(t)}if(!a.done)return A.default.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}},function(t,e,n){t.exports={default:n(119),__esModule:!0}},function(t,e,n){var i=n(1),A=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return A.stringify.apply(A,arguments)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}();!function(){document.removeEventListener}()},function(t,e,n){"use strict";var i=n(122),A=n.n(i),o=n(123),r=n.n(o),a=function(){function t(){A()(this,t)}return r()(t,[{key:"registeObjectEvent",value:function(t,e){console.log("registeObjectEvent"),e.on("mousedown",function(n){t.$emit("object:mousedown",e,n)}),e.on("mouseup",function(n){t.$emit("object:mouseup",e,n)}),e.on("mousemove",function(n){t.$emit("object:mousemove",e,n)}),e.on("mouseover",function(n){t.$emit("object:mouseover",e,n)}),e.on("mouseout",function(n){t.$emit("object:mouseout",e,n)}),e.on("mousedblclick",function(n){t.$emit("object:mousedblclick",e,n)}),e.on("mousewheel",function(n){t.$emit("object:mousewheel",e,n)})}}]),t}(),s=new a;e.a=s},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(36),A=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,A.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){"use strict";function i(t){function e(t){i(t.x+.5,t.y1>t.y2?t.y2:t.y1,t.x+.5,t.y2>t.y1?t.y2:t.y1)}function n(t){i(t.x1>t.x2?t.x2:t.x1,t.y+.5,t.x2>t.x1?t.x2:t.x1,t.y+.5)}function i(t,e,n,i){r.save(),r.lineWidth=s,r.strokeStyle=c,r.setLineDash([5,1]),r.beginPath(),r.moveTo((t+o[4])*l,(e+o[5])*l),r.lineTo((n+o[4])*l,(i+o[5])*l),r.stroke(),r.restore()}function A(t,e){t=Math.round(t),e=Math.round(e);for(var n=t-a,i=t+a;n<=i;n++)if(n===e)return!0;return!1}var o,r=t.getSelectionContext(),a=5,s=1,c="rgb(0,98,178,0.6)",l=1,h=[],u=[];t.on("mouse:down",function(){o=t.viewportTransform,l=t.getZoom()}),t.on("object:moving",function(e){var n=e.target,i=t.getObjects(),r=n.getCenterPoint(),a=r.x,s=r.y,c=n.getBoundingRect(),l=c.height/o[3],f=c.width/o[0],d=!1,v=!1;if(t._currentTransform){for(var p=i.length;p--;)if(i[p]!==n&&0!==i[p].opacity&&!1!==i[p].visible&&!1!==i[p].selectable){var g=i[p].getCenterPoint(),m=g.x,b=g.y,y=i[p].getBoundingRect(),x=y.height/o[3],w=y.width/o[0];A(m,a)&&(v=!0,h.push({x:m,y1:b<s?b-x/2-5:b+x/2+5,y2:s>b?s+l/2+5:s-l/2-5}),n.setPositionByOrigin(new fabric.Point(m,s),"center","center")),A(m-w/2,a-f/2)&&(v=!0,h.push({x:m-w/2,y1:b<s?b-x/2-5:b+x/2+5,y2:s>b?s+l/2+5:s-l/2-5}),n.setPositionByOrigin(new fabric.Point(m-w/2+f/2,s),"center","center")),A(m+w/2,a+f/2)&&(v=!0,h.push({x:m+w/2,y1:b<s?b-x/2-5:b+x/2+5,y2:s>b?s+l/2+5:s-l/2-5}),n.setPositionByOrigin(new fabric.Point(m+w/2-f/2,s),"center","center")),A(b,s)&&(d=!0,u.push({y:b,x1:m<a?m-w/2-5:m+w/2+5,x2:a>m?a+f/2+5:a-f/2-5}),n.setPositionByOrigin(new fabric.Point(a,b),"center","center")),A(b-x/2,s-l/2)&&(d=!0,u.push({y:b-x/2,x1:m<a?m-w/2-5:m+w/2+5,x2:a>m?a+f/2+5:a-f/2-5}),n.setPositionByOrigin(new fabric.Point(a,b-x/2+l/2),"center","center")),A(b+x/2,s+l/2)&&(d=!0,u.push({y:b+x/2,x1:m<a?m-w/2-5:m+w/2+5,x2:a>m?a+f/2+5:a-f/2-5}),n.setPositionByOrigin(new fabric.Point(a,b+x/2-l/2),"center","center"))}d||(u.length=0),v||(h.length=0)}}),t.on("before:render",function(){void 0!==t._target&&t.clearContext(t.contextTop)}),t.on("after:render",function(){for(var t=h.length;t--;)e(h[t]);for(var t=u.length;t--;)n(u[t]);h.length=u.length=0}),t.on("mouse:up",function(){h.length=u.length=0,t.renderAll()})}e.a=i},function(t,e,n){"use strict";function i(t){n(126)}var A=n(59),o=n(130),r=n(19),a=i,s=r(A.a,o.a,!1,a,"data-v-3b6631fc",null);e.a=s.exports},function(t,e){},function(t,e,n){"use strict";function i(t){n(128)}var A=n(60),o=n(129),r=n(19),a=i,s=r(A.a,o.a,!1,a,"data-v-8b5ed618",null);e.a=s.exports},function(t,e){},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"child-ul-wrapper",class:t.float},t._l(t.itemchildren,function(e){return n("li",{key:e.name,staticClass:"child-li-wrapper"},[e.children&&e.children.length>0?n("div",{staticClass:"has-child"},[n("div",{staticClass:"parent-name btn-wrapper-simple"},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))]),t._v(" "),n("i",{staticClass:"icon"})]),t._v(" "),n("tree-child-component",{attrs:{itemchildren:e.children,float:t.float},on:{childhandler:t.fnHandler}})],1):n("div",[n("div",{staticClass:"no-child-btn btn-wrapper-simple",on:{click:function(n){return n.stopPropagation(),t.fnHandler(e)}}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))])])])])}),0)},A=[],o={render:i,staticRenderFns:A};e.a=o},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"vue-contextmenu-listWrapper",class:"vue-contextmenuName-"+t.contextMenuData.menuName,on:{contextmenu:function(t){t.stopPropagation()}}},t._l(t.contextMenuData.menulists,function(e){return n("li",{key:e.btnName,staticClass:"context-menu-list"},[e.children&&e.children.length>0?n("div",{staticClass:"has-child"},[n("div",{staticClass:"parent-name btn-wrapper-simple",class:{"no-allow":!!e.disabled&&e.disabled}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right hoverbtn"},[t._v(t._s(e.btnName))]),t._v(" "),n("i",{staticClass:"icon hoverbicon"})]),t._v(" "),n("Tree",{attrs:{itemchildren:e.children,float:t.floatDirection},on:{childhandler:t.fnHandler}})],1):n("div",[n("div",{staticClass:"no-child-btn btn-wrapper-simple",class:{"no-allow":!!e.disabled&&e.disabled},on:{click:function(n){n.stopPropagation(),!0===e.disabled||t.fnHandler(e)}}},[n("i",{staticClass:"nav-icon-fontawe",class:e.icoName?e.icoName:""}),t._v(" "),n("span",{staticClass:"nav-name-right"},[t._v(t._s(e.btnName))])])])])}),0)},A=[],o={render:i,staticRenderFns:A};e.a=o},function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bigbox",style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;",on:{contextmenu:t.showMenu}},[n("div",{staticStyle:{position:"fixed",top:"-9999999999999999999px",left:"800px","z-index":"999999"}},[n("img",{attrs:{id:"barcode"}}),t._v(" "),n("div",{attrs:{id:"barbox"}}),t._v(" "),n("img",{staticClass:"qrcodeImg",attrs:{id:"qrcode",src:t.qrcodeImg,alt:""}})]),t._v(" "),n("div",{staticClass:"xZhou",style:"width: "+(t.boxWidth-t.returnXYshowcanvas(t.showXzhou,t.showYzhou))+"px; visibility:"+t.returnXYshow(t.showXzhou)+";margin-left:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;",attrs:{id:"xZhou"}},[n("div",{staticClass:"x-line",style:"width: "+(t.width>t.boxWidth?t.width-t.translateX:t.boxWidth-t.translateX)+"px;transform-origin:left; transform:translateX("+((t.translateX+18)*t.canvasZoom-18)+"px) scaleX("+t.canvasZoom+") ;"},t._l(t.xScale,function(e,i){return n("span",{key:i,staticClass:"number",style:{left:50*i+2+"px"}},[t._v(t._s(e.id))])}),0)]),t._v(" "),n("div",{staticClass:"yZhou",style:"height: "+(t.boxHeight-t.returnXYshowcanvas(t.showXzhou,t.showYzhou))+"px;  visibility:"+t.returnXYshow(t.showYzhou)+";margin-top:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;",attrs:{id:"yZhou"}},[n("div",{staticClass:"y-line",style:"height:"+(t.height>t.boxHeight?t.height-t.translateY:t.boxHeight-t.translateY)+"px; transform-origin:top; transform:translateY("+((t.translateY+18)*t.canvasZoom-18)+"px) scaleY("+t.canvasZoom+") ;top:"+t.returnXYshowcanvas(t.showXzhou,t.showYzhou)+"px;"},t._l(t.yScale,function(e,i){return n("span",{key:i,staticClass:"number",style:{top:50*i+2+"px"}},[t._v(t._s(e.id))])}),0)]),t._v(" "),n("div",{staticClass:"content",style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;",attrs:{id:"content"}},[n("GeminiScrollbar",{style:"width: "+t.boxWidth+"px;height:"+t.boxHeight+"px;"},[n("div",{staticClass:"black",style:t.canvasZoom<1?"position: absolute;transform: translateX(-50%);left: 50%;":"position: absolute;",attrs:{id:"blackbox"}},[n("div",{staticClass:"yellow",style:"width: "+t.width*t.canvasZoom+"px;height:"+t.height*t.canvasZoom+"px; "},[n("input",{staticStyle:{position:"fixed",top:"-1000000px","z-index":"9999"},attrs:{type:"text",id:"code"}}),t._v(" "),n("div",{staticStyle:{position:"fixed",top:"-100px","z-index":"9999"}},[t._v(" "+t._s(t.style.fontFamily))]),t._v(" "),n("canvas",{attrs:{id:"canvas",width:t.width>t.boxWidth?t.width:t.boxWidth,height:t.height>t.boxHeight?t.height:t.boxHeight}}),t._v(" "),n("div",{staticStyle:{position:"fixed",top:"-10000px",left:"60px","z-index":"99999999999999999999999"}},[n("canvas",{attrs:{id:"fontcanvas"}})])])])]),t._v(" "),n("vue-context-menu",{attrs:{contextMenuData:t.contextMenuData},on:{toTopLayer:t.toTopLayer,toLastLayer:t.toLastLayer,toNextLayer:t.toNextLayer,toBottomLayer:t.toBottomLayer,removeEditObj:t.removeEditObj,copypaste:t.copypaste}})],1)])},A=[],o={render:i,staticRenderFns:A};e.a=o}])});